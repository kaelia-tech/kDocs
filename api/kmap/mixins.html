<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mixins | KDK</title>
    <meta name="description" content="The Kalisio Development Kit">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kdk/kdk-icon-64x64.png">
  <link rel="manifest" href="/kdk/manifest.json">
    
    <link rel="preload" href="/kdk/assets/css/0.styles.c934418d.css" as="style"><link rel="preload" href="/kdk/assets/js/app.3c07759d.js" as="script"><link rel="preload" href="/kdk/assets/js/7.2760d4fb.js" as="script"><link rel="prefetch" href="/kdk/assets/js/10.b69d6edf.js"><link rel="prefetch" href="/kdk/assets/js/11.15f606b3.js"><link rel="prefetch" href="/kdk/assets/js/12.948612e1.js"><link rel="prefetch" href="/kdk/assets/js/13.f67c7c76.js"><link rel="prefetch" href="/kdk/assets/js/14.baa96983.js"><link rel="prefetch" href="/kdk/assets/js/15.16d08e04.js"><link rel="prefetch" href="/kdk/assets/js/16.0419598e.js"><link rel="prefetch" href="/kdk/assets/js/17.bb20def2.js"><link rel="prefetch" href="/kdk/assets/js/18.26068ac8.js"><link rel="prefetch" href="/kdk/assets/js/19.07c28091.js"><link rel="prefetch" href="/kdk/assets/js/2.222804eb.js"><link rel="prefetch" href="/kdk/assets/js/20.f771be00.js"><link rel="prefetch" href="/kdk/assets/js/21.2f700a0a.js"><link rel="prefetch" href="/kdk/assets/js/22.aad5ee8b.js"><link rel="prefetch" href="/kdk/assets/js/23.3c122a86.js"><link rel="prefetch" href="/kdk/assets/js/24.ca7c120b.js"><link rel="prefetch" href="/kdk/assets/js/25.6dcdbfa7.js"><link rel="prefetch" href="/kdk/assets/js/26.3b7f8d16.js"><link rel="prefetch" href="/kdk/assets/js/27.12332207.js"><link rel="prefetch" href="/kdk/assets/js/28.9e7471cc.js"><link rel="prefetch" href="/kdk/assets/js/29.96fe5c34.js"><link rel="prefetch" href="/kdk/assets/js/3.0f20bf3c.js"><link rel="prefetch" href="/kdk/assets/js/30.cb88ed65.js"><link rel="prefetch" href="/kdk/assets/js/31.07b27aa8.js"><link rel="prefetch" href="/kdk/assets/js/32.4a866b8a.js"><link rel="prefetch" href="/kdk/assets/js/33.a878a58f.js"><link rel="prefetch" href="/kdk/assets/js/34.1a34939b.js"><link rel="prefetch" href="/kdk/assets/js/35.9386eb86.js"><link rel="prefetch" href="/kdk/assets/js/36.1fb45e6c.js"><link rel="prefetch" href="/kdk/assets/js/37.28040fdd.js"><link rel="prefetch" href="/kdk/assets/js/38.415dee07.js"><link rel="prefetch" href="/kdk/assets/js/39.838c6ca8.js"><link rel="prefetch" href="/kdk/assets/js/4.76c0e305.js"><link rel="prefetch" href="/kdk/assets/js/40.228da909.js"><link rel="prefetch" href="/kdk/assets/js/41.0fa4d156.js"><link rel="prefetch" href="/kdk/assets/js/42.cbc84ce5.js"><link rel="prefetch" href="/kdk/assets/js/43.dd7ca14a.js"><link rel="prefetch" href="/kdk/assets/js/44.02e2e23a.js"><link rel="prefetch" href="/kdk/assets/js/45.a474bdc4.js"><link rel="prefetch" href="/kdk/assets/js/46.22a8e7f3.js"><link rel="prefetch" href="/kdk/assets/js/47.5e97974f.js"><link rel="prefetch" href="/kdk/assets/js/48.304e9286.js"><link rel="prefetch" href="/kdk/assets/js/49.839d7ea8.js"><link rel="prefetch" href="/kdk/assets/js/5.9309bde4.js"><link rel="prefetch" href="/kdk/assets/js/50.0e00c132.js"><link rel="prefetch" href="/kdk/assets/js/51.ca972297.js"><link rel="prefetch" href="/kdk/assets/js/52.547b1693.js"><link rel="prefetch" href="/kdk/assets/js/53.6aac873a.js"><link rel="prefetch" href="/kdk/assets/js/54.2b0777de.js"><link rel="prefetch" href="/kdk/assets/js/55.dc8b43e8.js"><link rel="prefetch" href="/kdk/assets/js/56.f63bf133.js"><link rel="prefetch" href="/kdk/assets/js/57.c02b9f02.js"><link rel="prefetch" href="/kdk/assets/js/6.4347df0a.js"><link rel="prefetch" href="/kdk/assets/js/8.13e220dc.js"><link rel="prefetch" href="/kdk/assets/js/9.20b3fdb3.js">
    <link rel="stylesheet" href="/kdk/assets/css/0.styles.c934418d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kdk/" class="home-link router-link-active"><!----> <span class="site-name">KDK</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">Tips</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">Tips</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <i><small>Unleashing the potential of spatial information</small></i></p> <ul class="sidebar-links"><li><a href="/kdk/api/" class="sidebar-link">API</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kCore</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>kMap</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/kdk/api/kmap/" class="sidebar-link">Overview</a></li><li><a href="/kdk/api/kmap/services.html" class="sidebar-link">Services</a></li><li><a href="/kdk/api/kmap/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/kdk/api/kmap/components.html" class="sidebar-link">Components</a></li><li><a href="/kdk/api/kmap/mixins.html" class="active sidebar-link">Mixins</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kdk/api/kmap/mixins.html#geolocation" class="sidebar-link">Geolocation</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kmap/mixins.html#navigator" class="sidebar-link">Navigator</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kmap/mixins.html#feature-service" class="sidebar-link">Feature Service</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kmap/mixins.html#map" class="sidebar-link">Map</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kmap/mixins.html#globe" class="sidebar-link">Globe</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kTeam</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kNotify</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kBilling</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kEvent</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="mixins"><a href="#mixins" aria-hidden="true" class="header-anchor">#</a> Mixins</h1> <h2 id="geolocation"><a href="#geolocation" aria-hidden="true" class="header-anchor">#</a> Geolocation</h2> <p>Make your component automatically retrieve the user's location on initialization or when he has logged in (the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" target="_blank" rel="noopener noreferrer">Geolocation API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used under-the-hood):</p> <ul><li><strong>updatePosition()</strong> launches a geolocation</li></ul> <blockquote><p>Will make the position available in the <code>user.position</code> property of the currently authenticated user in the <a href="/kdk/api/kcore/application.html#store">global store</a>.</p></blockquote> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Will raise an error toast on geolocation error</p></div> <h2 id="navigator"><a href="#navigator" aria-hidden="true" class="header-anchor">#</a> Navigator</h2> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>Only available on mobile devices</p></div> <p>Allow to launch native route navigation apps to go to a given location (the <a href="https://github.com/dpa99c/phonegap-launch-navigator" target="_blank" rel="noopener noreferrer">launch navigator cordova plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used under-the-hood):</p> <ul><li><strong>canNavigate()</strong> check if navigation is possible (mobile device and navigation app installed)</li> <li><strong>navigate(longitude, latitude)</strong> launches native route navigation app for the given location</li></ul> <h2 id="feature-service"><a href="#feature-service" aria-hidden="true" class="header-anchor">#</a> Feature Service</h2> <p>Ease requests to a <a href="/kdk/api/kmap/services.html#feature-service">feature service</a> in order to get real-time updates:</p> <ul><li><strong>getProbeFeatures(options)</strong> retrieve the probe locations (if any) for a given <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a> to initialize the feature layer</li> <li><strong>getFeatures(options, queryInterval)</strong> get the latest available features for a given <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a> at current time or in a given elapsed time range if a query interval in milliseconds is given</li></ul> <p>Please refer to <a href="/kdk/api/kmap/services.html#time-based-feature-aggregation">feature service API</a> for more details.</p> <h2 id="map"><a href="#map" aria-hidden="true" class="header-anchor">#</a> Map</h2> <p>The underlying map object is based on <a href="http://leafletjs.com/" target="_blank" rel="noopener noreferrer">Leaflet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and some mixins also rely on <a href="https://leafletjs.com/plugins.html" target="_blank" rel="noopener noreferrer">Leaflet plugins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The following set of mixins is to be used to construct a new map activity and underlying Leaflet objects.</p> <h3 id="base-map"><a href="#base-map" aria-hidden="true" class="header-anchor">#</a> Base Map</h3> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>This mixin is a mandatory one to build a map activity</p></div> <p>Make it possible to manage map layers and extend supported layer types:</p> <ul><li><strong>setupMap(domElement, options)</strong> creates the underlying Leaflet map object with given options</li> <li><strong>add(options)/removeLayer(name)</strong> registers/destroys a layer based on a <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a></li> <li><strong>show/hideLayer(name)</strong> (un)hides the given layer in map, on first show the layer will be lazily created</li> <li><strong>hasLayer(name)</strong> check if a given layer is already registered</li> <li><strong>isLayerVisible(name)</strong> check if a given layer is visible and underlying Leaflet object created</li> <li><strong>zoomToLayer(name)</strong> fits the map view to visualize a given layer</li> <li><strong>getLayerByName(name)</strong> retrieve the <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a> for a given layer</li> <li><strong>getLeafletLayerByName(name)</strong> retrieve the underlying Leaflet object for a given layer</li> <li><strong>createLeafletLayer(options)</strong> creates the underlying Leaflet object based on a <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a>, will check all registered constructor for any one matching</li> <li><strong>registerLeafletConstructor(constructor)</strong> registers a Leaflet constructor function for a given type of layer</li> <li><strong>center(longitude, latitude, zoomLevel)</strong> centers the map view to visualize a given point at a given zoom level</li> <li><strong>setCurrentTime(datetime)</strong> sets the current time to be used for time-based visualisation (e.g. weather forecast data or dynamic features)</li></ul> <p>This mixin automatically includes some Leaflet plugins: <a href="https://github.com/danwild/leaflet-fa-markers" target="_blank" rel="noopener noreferrer">leaflet-fa-markers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create markers using Font Awesome icons, <a href="https://github.com/Leaflet/Leaflet.fullscreen" target="_blank" rel="noopener noreferrer">Leaflet.fullscreen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to manage fullscreen mode, <a href="https://github.com/Leaflet/Leaflet.markercluster" target="_blank" rel="noopener noreferrer">Leaflet.markercluster<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create marker clusters, <a href="https://github.com/Leaflet/Leaflet.VectorGrid" target="_blank" rel="noopener noreferrer">Leaflet.VectorGrid<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to display <a href="https://github.com/mapbox/vector-tile-spec" target="_blank" rel="noopener noreferrer">vector tiles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="geojson-layer"><a href="#geojson-layer" aria-hidden="true" class="header-anchor">#</a> GeoJson Layer</h3> <p>Make it possible to manage and style raw or time-based GeoJson map layers (<a href="https://github.com/perliedman/leaflet-realtime" target="_blank" rel="noopener noreferrer">Leaflet.Realtime plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used under-the-hood):</p> <ul><li><strong>createLeafletGeoJsonLayer(options)</strong> automatically registered GeoJson Leaflet layer constructor</li> <li><strong>convertFromSimpleStyleSpec(style)</strong> helper function to convert from <a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to <a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>createMarkerFromStyle(latlng, style)</strong> helper function create a <a href="https://leafletjs.com/reference.html#marker" target="_blank" rel="noopener noreferrer">Leaflet marker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> from marker style options:
<ul><li><strong>icon</strong> icon style options
<ul><li><strong>type</strong> type name (ie class) of the icon to be created for the marker</li> <li><strong>options</strong> icon constructor options</li></ul></li> <li><strong>type</strong> type name (ie class) of the marker to be created</li> <li><strong>options</strong> marker constructor options</li></ul></li> <li><strong>register/unregisterLeafletStyle(type, generator)</strong> (un)registers a function generating a Leaflet object depending on the given type:
<ul><li><code>markerStyle</code> =&gt; <strong>f(feature, latlng, options)</strong> returns a <a href="https://leafletjs.com/reference.html#marker" target="_blank" rel="noopener noreferrer">Leaflet marker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>featureStyle</code> =&gt; <strong>f(feature, options)</strong> returns a <a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>tooltip</code> =&gt; <strong>f(feature, layer, options)</strong> returns a <a href="https://leafletjs.com/reference.html#tooltip" target="_blank" rel="noopener noreferrer">Leaflet tooltip<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>popup</code> =&gt; <strong>f(feature, layer, options)</strong> returns a <a href="https://leafletjs.com/reference.html#popup" target="_blank" rel="noopener noreferrer">Leaflet popup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul> <p>The mixin automatically registers defaults styling:</p> <ul><li><code>markerStyle</code> =&gt; will create a marker based on the following options merged with the following order of precedence
<ul><li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on <strong>feature.style</strong> or <strong>feature.properties</strong></li> <li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on layer descriptor</li> <li><a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on the <strong>pointStyle</strong> property in the component</li></ul></li> <li><code>featureStyle</code> =&gt; will create a style based on the following options merged with the following order of precedence
<ul><li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on <strong>feature.style</strong> or <strong>feature.properties</strong></li> <li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on layer descriptor</li> <li><a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set on the <strong>featureStyle</strong> property in the component</li></ul></li> <li><code>tooltip</code> =&gt; will create a tooltip based on the following options with the following order of precedence
<ul><li><strong>tooltip</strong>: set on layer descriptor or in the component
<ul><li><strong>property</strong>: property name to appear in the tooltip</li> <li><strong>template</strong>: <a href="https://lodash.com/docs/#template" target="_blank" rel="noopener noreferrer">Lodash template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to generate tooltip content with feature and its properties as context</li></ul></li></ul></li> <li><code>popup</code> =&gt; will create a popup displaying a property name/value table based on the following options with the following order of precedence
<ul><li><strong>popup</strong>: set on layer descriptor or in the component
<ul><li><strong>pick</strong>: array of property names to appear in the popup</li> <li><strong>omit</strong>: array of property names not to appear in the popup</li> <li><strong>options</strong>: Leaflet <a href="https://leafletjs.com/reference.html#popup-option" target="_blank" rel="noopener noreferrer">popup options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></li></ul> <p>If your component has a <strong>onLeafletFeature(feature, layer, options)</strong> method it will be called each time a new GeoJson feature is created.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Marker cluster options are to be provided in the <strong>cluster</strong> property of the Leaflet layer options</p></div> <p>The following configuration illustrates a GeoJson marker cluster layer using options set on the layer descriptor (see image below):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Layer'</span><span class="token punctuation">,</span>
  description<span class="token punctuation">:</span> <span class="token string">'My sites'</span><span class="token punctuation">,</span>
  tags<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'business'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  icon<span class="token punctuation">:</span> <span class="token string">'star'</span><span class="token punctuation">,</span>
  attribution<span class="token punctuation">:</span> <span class="token string">'(c) My company'</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">'OverlayLayer'</span><span class="token punctuation">,</span>
  leaflet<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">'geoJson'</span><span class="token punctuation">,</span>
    source<span class="token punctuation">:</span> <span class="token string">'https://s3.eu-central-1.amazonaws.com/kargo/nuclear-sites.json'</span><span class="token punctuation">,</span>
    cluster<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'marker-color'</span><span class="token punctuation">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
    <span class="token string">'icon-color'</span><span class="token punctuation">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
    <span class="token string">'icon-classes'</span><span class="token punctuation">:</span> <span class="token string">'fa fa-star'</span><span class="token punctuation">,</span>
    popup<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      pick<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'NAME'</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tooltip<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      property<span class="token punctuation">:</span> <span class="token string">'LABEL'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/kdk/assets/img/marker-cluster-2D.63ae3032.png" alt="2D marker cluster"></p> <h3 id="file-layer"><a href="#file-layer" aria-hidden="true" class="header-anchor">#</a> File Layer</h3> <p>Make it possible to drag'n'drop GeoJson or KML file on the map (<a href="https://github.com/makinacorpus/Leaflet.FileLayer" target="_blank" rel="noopener noreferrer">Leaflet.FileLayer plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used under-the-hood). It will automatically create a new <a href="/kdk/api/kmap/mixins.html#geojson-layer">GeoJson layer</a> named after the filename on drop. As a consequence it has to be used with the GeoJson layer mixin and will use the configured styling.</p> <h3 id="forecast-layer"><a href="#forecast-layer" aria-hidden="true" class="header-anchor">#</a> Forecast Layer</h3> <p>Make it possible to manage <a href="https://weacast.github.io/weacast-docs/api/layers.html#forecast-data-layers" target="_blank" rel="noopener noreferrer">Weacast map layers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <ul><li><strong>createLeafletForecastLayer(options)</strong> automatically registered Weacast Leaflet layer constructor</li> <li><strong>setupForecastModels()</strong> retrieve available <a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">forecast models<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> from <a href="https://weacast.github.io/weacast-docs/api/forecast.html" target="_blank" rel="noopener noreferrer">Weacast API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>getForecastForLocation(long, lat, startTime, endTime)</strong> helper function to dynamically probe weather elements at a given location in a given time range using the <a href="https://weacast.github.io/weacast-docs/api/probe.html#probes-api" target="_blank" rel="noopener noreferrer">Weacast API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>getForecastForFeature(featureId, startTime, endTime)</strong> helper function to get weather element at static probe location in a given time range using the <a href="https://weacast.github.io/weacast-docs/api/probe.html#probe-results-api" target="_blank" rel="noopener noreferrer">Weacast API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>getProbedLocationForecastAtCurrentTime()</strong> computes element values at current time once a location has been probed (dynamically or statically)</li> <li><strong>getProbedLocationForecastMarker(feature, latlng)</strong> generates a marker using a <a href="http://weather.rap.ucar.edu/info/about_windbarb.html" target="_blank" rel="noopener noreferrer">wind barb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> according to element values in feature</li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>This mixin assumes that your component has initialized its <a href="https://weacast.github.io/weacast-docs/api/application.html#client-setup" target="_blank" rel="noopener noreferrer">Weacast client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the <code>weacastApi</code> property</p></div> <h3 id="service-layer"><a href="#service-layer" aria-hidden="true" class="header-anchor">#</a> Service Layer</h3> <p><strong>TODO</strong></p> <h3 id="collection-layer"><a href="#collection-layer" aria-hidden="true" class="header-anchor">#</a> Collection Layer</h3> <p><strong>TODO</strong></p> <h3 id="geotiff-layer"><a href="#geotiff-layer" aria-hidden="true" class="header-anchor">#</a> Geotiff Layer</h3> <p><strong>TODO</strong></p> <h2 id="globe"><a href="#globe" aria-hidden="true" class="header-anchor">#</a> Globe</h2> <p>The underlying globe object is based on <a href="https://cesium.com/" target="_blank" rel="noopener noreferrer">Cesium<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="base-globe"><a href="#base-globe" aria-hidden="true" class="header-anchor">#</a> Base Globe</h3> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>This mixin is a mandatory one to build a globe activity</p></div> <p>Make it possible to manage globe layers and extend supported layer types:</p> <ul><li><strong>setupGlobe(domElement, token)</strong> creates the underlying Cesium globe object with given Cesium Ion token</li> <li><strong>add(options)/removeLayer(name)</strong> registers/destroys a layer based on a <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a></li> <li><strong>show/hideLayer(name)</strong> (un)hides the given layer in globe, on first show the layer will be lazily created</li> <li><strong>hasLayer(name)</strong> check if a given layer is already registered</li> <li><strong>isLayerVisible(name)</strong> check if a given layer is visible and underlying Cesium object created</li> <li><strong>zoomToLayer(name)</strong> fits the globe view to visualize a given layer</li> <li><strong>getLayerByName(name)</strong> retrieve the <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a> for a given layer</li> <li><strong>getCesiumLayerByName(name)</strong> retrieve the underlying Cesium object for a given layer</li> <li><strong>createCesiumLayer(options)</strong> creates the underlying Cesium object based on a <a href="/kdk/api/kmap/services.html#catalog">catalog layer descriptor</a>, will check all registered constructor for any one matching</li> <li><strong>registerCesiumConstructor(constructor)</strong> registers a Cesium constructor function for a given type of layer</li> <li><strong>center(longitude, latitude, altitude, heading, pitch, roll)</strong> centers the globe view to visualize a given point at a given altitude with and orientation (default is pointing ground vertically [0, 0, -90])</li></ul> <h3 id="geojson-layer-2"><a href="#geojson-layer-2" aria-hidden="true" class="header-anchor">#</a> GeoJson Layer</h3> <p>Make it possible to manage and style raw or time-based GeoJson map layers:</p> <ul><li><strong>createCesiumGeoJsonLayer(options)</strong> automatically registered GeoJson Cesium layer constructor</li> <li><strong>convertFromSimpleStyleSpec(style)</strong> helper function to convert from <a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to <a href="https://cesiumjs.org/Cesium/Build/Documentation/GeoJsonDataSource.html#.load" target="_blank" rel="noopener noreferrer">Cesium style options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Marker cluster options are to be provided in the <strong>cluster</strong> property of the Cesium layer options</p></div> <p>The following configuration illustrates a GeoJson marker cluster layer using options set on the layer descriptor (see image below):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Layer'</span><span class="token punctuation">,</span>
  description<span class="token punctuation">:</span> <span class="token string">'My sites'</span><span class="token punctuation">,</span>
  tags<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'business'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  icon<span class="token punctuation">:</span> <span class="token string">'star'</span><span class="token punctuation">,</span>
  attribution<span class="token punctuation">:</span> <span class="token string">'(c) My company'</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">'OverlayLayer'</span><span class="token punctuation">,</span>
  cesium<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">'geoJson'</span><span class="token punctuation">,</span>
    source<span class="token punctuation">:</span> <span class="token string">'https://s3.eu-central-1.amazonaws.com/kargo/nuclear-sites.json'</span><span class="token punctuation">,</span>
    cluster<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      pixelRange<span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'marker-symbol'</span><span class="token punctuation">:</span> <span class="token string">'star'</span><span class="token punctuation">,</span>
    <span class="token string">'marker-color'</span><span class="token punctuation">:</span> <span class="token string">'#FFA500'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/kdk/assets/img/marker-cluster-3D.e8927429.png" alt="3D marker cluster"></p> <h3 id="file-layer-2"><a href="#file-layer-2" aria-hidden="true" class="header-anchor">#</a> File Layer</h3> <p>Make it possible to drag'n'drop GeoJson or KML file on the globe. It will automatically create a new <a href="/kdk/api/kmap/mixins.html#geojson-layer">GeoJson layer</a> named after the filename on drop. As a consequence it has to be used with the GeoJson layer mixin and will use the configured styling.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/kdk/api/kmap/components.html" class="prev">
          Components
        </a></span> <span class="next"><a href="/kdk/api/kteam/">
          Overview
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/kdk/assets/js/app.3c07759d.js" defer></script><script src="/kdk/assets/js/7.2760d4fb.js" defer></script>
  </body>
</html>
