<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Map Mixins | KDK</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kdk/kdk-icon-64x64.png">
    <link rel="manifest" href="/kdk/manifest.json">
    <meta name="description" content="The Kalisio Development Kit">
    
    <link rel="preload" href="/kdk/assets/css/0.styles.d338d316.css" as="style"><link rel="preload" href="/kdk/assets/js/app.0d2744f6.js" as="script"><link rel="preload" href="/kdk/assets/js/3.934b6e1d.js" as="script"><link rel="preload" href="/kdk/assets/js/17.600f88a5.js" as="script"><link rel="preload" href="/kdk/assets/js/9.07565a82.js" as="script"><link rel="prefetch" href="/kdk/assets/js/10.a08c8fa6.js"><link rel="prefetch" href="/kdk/assets/js/11.31827355.js"><link rel="prefetch" href="/kdk/assets/js/12.c9b0320b.js"><link rel="prefetch" href="/kdk/assets/js/13.60327f92.js"><link rel="prefetch" href="/kdk/assets/js/14.47c0a2b4.js"><link rel="prefetch" href="/kdk/assets/js/15.b1445e66.js"><link rel="prefetch" href="/kdk/assets/js/16.bd714368.js"><link rel="prefetch" href="/kdk/assets/js/18.44b2f764.js"><link rel="prefetch" href="/kdk/assets/js/19.1aef3373.js"><link rel="prefetch" href="/kdk/assets/js/2.74a99991.js"><link rel="prefetch" href="/kdk/assets/js/20.0835256d.js"><link rel="prefetch" href="/kdk/assets/js/21.d20c4ede.js"><link rel="prefetch" href="/kdk/assets/js/22.6b73cedb.js"><link rel="prefetch" href="/kdk/assets/js/23.7132113a.js"><link rel="prefetch" href="/kdk/assets/js/24.824ae611.js"><link rel="prefetch" href="/kdk/assets/js/25.f5c8a13a.js"><link rel="prefetch" href="/kdk/assets/js/26.6aa473d4.js"><link rel="prefetch" href="/kdk/assets/js/27.4654bd50.js"><link rel="prefetch" href="/kdk/assets/js/28.99577333.js"><link rel="prefetch" href="/kdk/assets/js/29.fbabc77c.js"><link rel="prefetch" href="/kdk/assets/js/30.e640f814.js"><link rel="prefetch" href="/kdk/assets/js/31.2ee15340.js"><link rel="prefetch" href="/kdk/assets/js/32.571e4ca9.js"><link rel="prefetch" href="/kdk/assets/js/33.4b38a62b.js"><link rel="prefetch" href="/kdk/assets/js/34.97fee52f.js"><link rel="prefetch" href="/kdk/assets/js/35.60af735b.js"><link rel="prefetch" href="/kdk/assets/js/36.7a31460b.js"><link rel="prefetch" href="/kdk/assets/js/37.c9ed3b37.js"><link rel="prefetch" href="/kdk/assets/js/38.b69401f7.js"><link rel="prefetch" href="/kdk/assets/js/39.f103ef3a.js"><link rel="prefetch" href="/kdk/assets/js/4.f12e5706.js"><link rel="prefetch" href="/kdk/assets/js/40.f531da64.js"><link rel="prefetch" href="/kdk/assets/js/41.9ef837e1.js"><link rel="prefetch" href="/kdk/assets/js/42.75d6a1ed.js"><link rel="prefetch" href="/kdk/assets/js/43.08ea7606.js"><link rel="prefetch" href="/kdk/assets/js/44.f60a931d.js"><link rel="prefetch" href="/kdk/assets/js/45.36180ed1.js"><link rel="prefetch" href="/kdk/assets/js/46.1ee07807.js"><link rel="prefetch" href="/kdk/assets/js/47.25ad3467.js"><link rel="prefetch" href="/kdk/assets/js/48.8eaed1f8.js"><link rel="prefetch" href="/kdk/assets/js/49.6288f067.js"><link rel="prefetch" href="/kdk/assets/js/5.481aa321.js"><link rel="prefetch" href="/kdk/assets/js/50.e0b392d3.js"><link rel="prefetch" href="/kdk/assets/js/51.5a7557d7.js"><link rel="prefetch" href="/kdk/assets/js/52.765ce3b8.js"><link rel="prefetch" href="/kdk/assets/js/6.6c7d3e51.js"><link rel="prefetch" href="/kdk/assets/js/7.39a11fd4.js"><link rel="prefetch" href="/kdk/assets/js/8.95e18d53.js">
    <link rel="stylesheet" href="/kdk/assets/css/0.styles.d338d316.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kdk/" class="home-link router-link-active"><!----> <span class="site-name">KDK</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kdk/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">
  Tips
</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">
  Tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kdk/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">
  Tips
</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">
  Tools
</a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <!----></p> <ul class="sidebar-links"><li><a href="/kdk/api/" aria-current="page" class="sidebar-link">API</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>map</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kdk/api/map/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/kdk/api/map/services.html" class="sidebar-link">Services</a></li><li><a href="/kdk/api/map/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/kdk/api/map/components.html" class="sidebar-link">Components</a></li><li><a href="/kdk/api/map/mixins.html" class="sidebar-link">Mixins</a></li><li><a href="/kdk/api/map/map-mixins.html" aria-current="page" class="active sidebar-link">Map Mixins</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#base-map" class="sidebar-link">Base Map</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#map-style" class="sidebar-link">Map Style</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#map-popup" class="sidebar-link">Map Popup</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#map-tooltip" class="sidebar-link">Map Tooltip</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#geojson-layer" class="sidebar-link">GeoJson Layer</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#edit-layer" class="sidebar-link">Edit Layer</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#file-layer" class="sidebar-link">File Layer</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#forecast-layer" class="sidebar-link">Forecast Layer</a></li><li class="sidebar-sub-header"><a href="/kdk/api/map/map-mixins.html#map-activity" class="sidebar-link">Map Activity</a></li></ul></li><li><a href="/kdk/api/map/globe-mixins.html" class="sidebar-link">Globe Mixins</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="map-mixins"><a href="#map-mixins" class="header-anchor">#</a> Map Mixins</h1> <p>The underlying map object is based on <a href="http://leafletjs.com/" target="_blank" rel="noopener noreferrer">Leaflet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and some mixins also rely on <a href="https://leafletjs.com/plugins.html" target="_blank" rel="noopener noreferrer">Leaflet plugins<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The following set of mixins is to be used to construct a new map activity and underlying Leaflet objects.</p> <h2 id="base-map"><a href="#base-map" class="header-anchor">#</a> Base Map</h2> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This mixin is a mandatory one to build a map activity</p></div> <p>Make it possible to manage map layers and extend supported layer types:</p> <ul><li><strong>setupMap(domElement, options)</strong> creates the underlying Leaflet map object with given options</li> <li><strong>addLayer(options)/removeLayer(name)</strong> registers/destroys a layer based on a <a href="/kdk/api/map/services.html#catalog-service">catalog layer descriptor</a></li> <li><strong>showLayer/hideLayer(name)</strong> (un)hides the given layer in map, on first show the layer will be lazily created</li> <li><strong>hasLayer(name)</strong> check if a given layer is already registered</li> <li><strong>isLayerVisible(name)</strong> check if a given layer is visible and underlying Leaflet object created</li> <li><strong>zoomToLayer(name)</strong> fits the map view to visualize a given layer</li> <li><strong>zoomToBounds(bounds)</strong> fits the map view to visualize a given extent as bounds [ [south, west], [north, east] ]</li> <li><strong>getLayerByName(name)</strong> retrieve the <a href="/kdk/api/map/services.html#catalog-service">catalog layer descriptor</a> for a given layer</li> <li><strong>renameLayer(previousName, newName)</strong> rename a given layer</li> <li><strong>removeLayer(name)</strong> destroys a given layer</li> <li><strong>getLeafletLayerByName(name)</strong> retrieve the underlying Leaflet object for a given layer</li> <li><strong>createLeafletLayer(options)</strong> creates the underlying Leaflet object based on a <a href="/kdk/api/map/services.html#catalog-service">catalog layer descriptor</a>, will check all registered constructor for any one matching</li> <li><strong>getLeafletPaneByName(name)</strong> retrieve the underlying Leaflet object for a given pane</li> <li><strong>createLeafletPane(name)</strong> creates the underlying Leaflet object for a pane</li> <li><strong>removeLeafletPane(name)</strong> destroys the underlying Leaflet object for a given pane</li> <li><strong>registerLeafletConstructor(constructor)</strong> registers a Leaflet constructor function for a given type of layer</li> <li><strong>center(longitude, latitude, zoomLevel)</strong> centers the map view to visualize a given point at a given zoom level</li> <li><strong>getCenter()</strong> get the current map view center as longitude, latitude and zoom level</li> <li><strong>getBounds()</strong> get the current map view bounds as <code>[ [south, west], [north, east] ]</code></li> <li><strong>setCurrentTime(datetime)</strong> sets the current time to be used for time-based visualisation (e.g. weather forecast data or dynamic features)</li></ul> <p>This mixin also adds the following internal data properties:</p> <ul><li><strong>layers</strong> available layers as <a href="/kdk/api/map/services.html#catalog-service">catalog layer descriptors</a></li></ul> <p>This mixin automatically includes some Leaflet plugins: <a href="https://github.com/danwild/leaflet-fa-markers" target="_blank" rel="noopener noreferrer">leaflet-fa-markers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to create markers using Font Awesome icons, <a href="https://github.com/Leaflet/Leaflet.fullscreen" target="_blank" rel="noopener noreferrer">Leaflet.fullscreen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to manage fullscreen mode, <a href="https://github.com/Leaflet/Leaflet.markercluster" target="_blank" rel="noopener noreferrer">Leaflet.markercluster<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to create marker clusters, <a href="https://github.com/Leaflet/Leaflet.VectorGrid" target="_blank" rel="noopener noreferrer">Leaflet.VectorGrid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to display <a href="https://github.com/mapbox/vector-tile-spec" target="_blank" rel="noopener noreferrer">vector tiles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="managing-panes"><a href="#managing-panes" class="header-anchor">#</a> Managing panes</h3> <p>Although DOM-based layers like <a href="https://leafletjs.com/reference.html#marker" target="_blank" rel="noopener noreferrer">Markers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> could make use of a <code>z-index</code> to possibly manage render order between them, SVG or canvas-based layers used to manage <a href="https://leafletjs.com/reference.html#geojson" target="_blank" rel="noopener noreferrer">GeoJson features<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> like <a href="https://leafletjs.com/reference.html#polyline" target="_blank" rel="noopener noreferrer">Polylines<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> provided no mean to do so. Similarly, there was no simple way to render some layers only at some specific zoom levels. This is the reason why Leaflet 1.0 introduced the concept of <a href="https://leafletjs.com/reference.html#map-pane" target="_blank" rel="noopener noreferrer">panes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you add a <code>zIndex</code> option to your layer descriptor we will create a dedicated pane for you under-the-hood so that the layer will be rendered at its right rank. Check the <code>z-index</code> value of <a href="https://leafletjs.com/reference.html#map-pane" target="_blank" rel="noopener noreferrer">the default panes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to select the appropriate one.</p> <p>If you add a <code>panes</code> option to your layer descriptor we will create the dedicated panes for you under-the-hood so that you can then set in the <code>pane</code> option of any sublayer the pane it will belong to. Each pane must have a unique name and can be visible at specific zoom levels:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Layer'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  panes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'waypoints'</span><span class="token punctuation">,</span>
    minZoom<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    maxZoom<span class="token operator">:</span> <span class="token number">14</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="map-style"><a href="#map-style" class="header-anchor">#</a> Map Style</h2> <p>Make it possible to generate Leaflet map objects with style based on (Geo)Json (feature) properties:</p> <ul><li><strong>convertFromSimpleStyleSpec(style)</strong> helper function to convert from <a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to <a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><strong>createMarkerFromStyle(latlng, style)</strong> helper function create a <a href="https://leafletjs.com/reference.html#marker" target="_blank" rel="noopener noreferrer">Leaflet marker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from marker style options:
<ul><li><strong>icon</strong> icon style options
<ul><li><strong>type</strong> type name (ie class) of the icon to be created for the marker</li> <li><strong>options</strong> icon constructor options</li></ul></li> <li><strong>type</strong> type name (ie class) of the marker to be created</li> <li><strong>options</strong> marker constructor options</li></ul></li></ul> <p>Use <strong>register/unregisterStyle(type, generator)</strong> to (un)register a function generating a Leaflet object depending on the given type:</p> <ul><li><code>markerStyle</code> =&gt; <strong>f(feature, latlng, options)</strong> returns a <a href="https://leafletjs.com/reference.html#marker" target="_blank" rel="noopener noreferrer">Leaflet marker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>featureStyle</code> =&gt; <strong>f(feature, options)</strong> returns a <a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The <a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> does not cover all <a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. However you can use it simply by converting option names from camel case to kebab case.</p></div> <p>The mixin automatically registers defaults styling:</p> <ul><li><code>markerStyle</code> =&gt; will create a marker based on the following options merged with the following order of precedence
<ul><li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on <strong>feature.style</strong> or <strong>feature.properties</strong></li> <li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on layer descriptor</li> <li><a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on the <strong>pointStyle</strong> property in the component</li></ul></li> <li><code>featureStyle</code> =&gt; will create a style based on the following options merged with the following order of precedence
<ul><li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on <strong>feature.style</strong> or <strong>feature.properties</strong></li> <li><a href="https://github.com/mapbox/simplestyle-spec" target="_blank" rel="noopener noreferrer">simple style spec options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on layer descriptor</li> <li><a href="https://leafletjs.com/reference.html#path-option" target="_blank" rel="noopener noreferrer">Leaflet style options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> set on the <strong>featureStyle</strong> property in the component</li></ul></li></ul> <h2 id="map-popup"><a href="#map-popup" class="header-anchor">#</a> Map Popup</h2> <p>Make it possible to generate <a href="https://leafletjs.com/reference.html#popup" target="_blank" rel="noopener noreferrer">Leaflet popups<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> based on GeoJson feature properties. Use <strong>register/unregisterStyle(<code>popup</code>, generator)</strong> to (un)register a function <strong>f(feature, layer, options)</strong> returning a <a href="https://leafletjs.com/reference.html#popup" target="_blank" rel="noopener noreferrer">Leaflet popup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The mixin automatically registers a default generator that will create a popup displaying a property name/value table based on the following options with the following order of precedence</p> <ul><li><strong>popup</strong>: set on <strong>feature.properties</strong> or layer descriptor or in the <strong>popup</strong> property of component options
<ul><li><strong>pick</strong>: array of property names to appear in the popup</li> <li><strong>omit</strong>: array of property names not to appear in the popup</li> <li><strong>template</strong>: <a href="https://lodash.com/docs/#template" target="_blank" rel="noopener noreferrer">Lodash template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to generate popup content with <code>feature</code>, its <code>properties</code> and translation function <code>$t</code> as context</li> <li><strong>text</strong>: text content of the popup, if provided will override default display</li> <li><strong>options</strong>: Leaflet <a href="https://leafletjs.com/reference.html#popup-option" target="_blank" rel="noopener noreferrer">popup options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="map-tooltip"><a href="#map-tooltip" class="header-anchor">#</a> Map Tooltip</h2> <p>Make it possible to generate <a href="https://leafletjs.com/reference.html#tooltip" target="_blank" rel="noopener noreferrer">Leaflet tooltips<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> based on GeoJson feature properties. Use <strong>register/unregisterStyle(<code>tooltip</code>, generator)</strong> to (un)register a function <strong>f(feature, layer, options)</strong> returning a <a href="https://leafletjs.com/reference.html#tooltip" target="_blank" rel="noopener noreferrer">Leaflet tooltip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The mixin automatically registers a default generator that will create a tooltip based on the following options with the following order of precedence</p> <ul><li><strong>tooltip</strong>: set on <strong>feature.properties</strong> or layer descriptor or in the <strong>tooltip</strong> property of component options
<ul><li><strong>property</strong>: property name to appear in the tooltip</li> <li><strong>template</strong>: <a href="https://lodash.com/docs/#template" target="_blank" rel="noopener noreferrer">Lodash template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to generate tooltip content with <code>feature</code>, its <code>properties</code> and translation function <code>$t</code> as context</li> <li><strong>text</strong>: text content of the tooltip, if provided will override default display</li> <li><strong>options</strong>: Leaflet <a href="https://leafletjs.com/reference.html#tooltip-option" target="_blank" rel="noopener noreferrer">tooltip options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="geojson-layer"><a href="#geojson-layer" class="header-anchor">#</a> GeoJson Layer</h2> <p>Make it possible to manage and style raw or time-based GeoJson map layers (<a href="https://github.com/perliedman/leaflet-realtime" target="_blank" rel="noopener noreferrer">Leaflet.Realtime plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used under-the-hood):</p> <ul><li><strong>createLeafletGeoJsonLayer(options)</strong> automatically registered GeoJson Leaflet layer constructor</li> <li><strong>updateLayer(name, geoJson, remove)</strong> update underlying GeoJson data of a given layer, if <code>remove</code> is <code>true</code> it will remove given features from the layer, otherwise it will add new ones found and update matching ones based on the <code>featureId</code> option</li></ul> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>The <a href="/kdk/api/map/mixins.html#map-style">style mixin</a> is mandatory when using this mixin. If you'd like to support popups/tooltips you should also use the <a href="/kdk/api/map/mixins.html#map-tooltip">popup mixin</a> and/or <a href="/kdk/api/map/mixins.html#map-tooltip">tooltip mixin</a>.</p></div> <p>If your component has a <strong>onLeafletFeature(feature, layer, options)</strong> method it will be called each time a new GeoJson feature is created.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Marker cluster options are to be provided in the <strong>cluster</strong> property of the Leaflet layer options</p></div> <p>The following configuration illustrates a GeoJson marker cluster layer using options set on the layer descriptor (see image below):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Layer'</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">'My sites'</span><span class="token punctuation">,</span>
  tags<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'business'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  icon<span class="token operator">:</span> <span class="token string">'star'</span><span class="token punctuation">,</span>
  attribution<span class="token operator">:</span> <span class="token string">'(c) My company'</span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'OverlayLayer'</span><span class="token punctuation">,</span>
  leaflet<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'geoJson'</span><span class="token punctuation">,</span>
    source<span class="token operator">:</span> <span class="token string">'https://s3.eu-central-1.amazonaws.com/kargo/nuclear-sites.json'</span><span class="token punctuation">,</span>
    cluster<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'marker-color'</span><span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
    <span class="token string">'icon-color'</span><span class="token operator">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
    <span class="token string">'icon-classes'</span><span class="token operator">:</span> <span class="token string">'fa fa-star'</span><span class="token punctuation">,</span>
    popup<span class="token operator">:</span> <span class="token punctuation">{</span>
      pick<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'NAME'</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
      property<span class="token operator">:</span> <span class="token string">'LABEL'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/kdk/assets/img/marker-cluster-2D.63ae3032.png" alt="2D marker cluster"></p> <h3 id="additional-feature-types"><a href="#additional-feature-types" class="header-anchor">#</a> Additional feature types</h3> <p>The following options can be set as feature <code>properties</code> to manage more geometry types:</p> <ul><li><strong>geodesic</strong> boolean set to <code>true</code> on a <code>LineString</code> will result in a geodesic line from the <a href="https://github.com/henrythasler/Leaflet.Geodesic" target="_blank" rel="noopener noreferrer">Leaflet.Geodesic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> plugin</li> <li><strong>geodesic</strong> boolean set to <code>true</code> on a <code>Point</code> will result in a great circle from the <a href="https://github.com/henrythasler/Leaflet.Geodesic" target="_blank" rel="noopener noreferrer">Leaflet.Geodesic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> plugin, which <strong>radius</strong> must be specified in meters</li></ul> <h3 id="dynamic-styling"><a href="#dynamic-styling" class="header-anchor">#</a> Dynamic styling</h3> <p>Usually the same style is used for all features of a GeoJson layer, you might however require a more dynamic style base on each feature properties. To handle this use case you can either:</p> <ul><li>provide styling options for each feature in their <code>properties</code> or <code>style</code> field</li> <li>use <a href="https://lodash.com/docs/#template" target="_blank" rel="noopener noreferrer">Lodash templating<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on layer styling options with feature and its properties as context</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Templating can only be efficient if compilers are created upfront, as a consequence you need to declare the list of templated options in your layer styling using the <code>template</code> property.</p></div> <p>For instance you can change the marker color or image based on a given features's property like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'marker-color'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;% if (properties.visibility &lt; 75) { %&gt;#000000&lt;% }
                  else if (properties.visibility &lt; 300) { %&gt;#d20200&lt;% }
                  else if (properties.visibility &lt; 1500) { %&gt;#f9b40f&lt;% }
                  else if (properties.visibility &lt; 3000) { %&gt;#eef52f&lt;% }
                  else { %&gt;#33c137&lt;% } %&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token string">'marker-symbol'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;% if (properties.visibility &lt; 75) { %&gt;/statics/windyblack.png&lt;% }
                    else if (properties.visibility &lt; 300) { %&gt;/statics/windyred.png&lt;% }
                    else if (properties.visibility &lt; 1500) { %&gt;/statics/windyorange.png&lt;% }
                    else if (properties.visibility &lt; 3000) { %&gt;/statics/windyyellow.png&lt;% }
                    else { %&gt;/statics/windygreen.png&lt;% } %&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
template<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'marker-color'</span><span class="token punctuation">,</span> <span class="token string">'marker-symbol'</span><span class="token punctuation">]</span>
</code></pre></div><p>You can also draw a path with a different styling on each part like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'FeatureCollection'</span><span class="token punctuation">,</span>
  features<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'Feature'</span><span class="token punctuation">,</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span> stroke<span class="token operator">:</span> <span class="token string">'#000000'</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    geometry<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'LineString'</span><span class="token punctuation">,</span> coordinates<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'Feature'</span><span class="token punctuation">,</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span> stroke<span class="token operator">:</span> <span class="token string">'#FF00FF'</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    geometry<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'LineString'</span><span class="token punctuation">,</span> coordinates<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="edit-layer"><a href="#edit-layer" class="header-anchor">#</a> Edit Layer</h2> <p>Make it possible to edit features of a <a href="/kdk/api/map/map-mixins.html#geojson-layer">GeoJson layer</a> (geometry and properties):</p> <ul><li><strong>editLayer(name)</strong> start/stop layer edition on a given layer</li> <li><strong>updateFeatureProperties(feature, layer, leafletLayer)</strong> update feature properties action handler that will open an <a href="/kdk/api/core/components.html#editors">editor</a> to define feature properties</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>It has to be used with the GeoJson layer mixin and will use the configured styling.</p></div> <h2 id="file-layer"><a href="#file-layer" class="header-anchor">#</a> File Layer</h2> <p>Make it possible to drag'n'drop GeoJson or KML file on the map (<a href="https://github.com/makinacorpus/Leaflet.FileLayer" target="_blank" rel="noopener noreferrer">Leaflet.FileLayer plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used under-the-hood). It will automatically create a new <a href="/kdk/api/map/map-mixins.html#geojson-layer">GeoJson layer</a> named after the filename on drop. As a consequence it has to be used with the GeoJson layer mixin and will use the configured styling.</p> <h2 id="forecast-layer"><a href="#forecast-layer" class="header-anchor">#</a> Forecast Layer</h2> <p>Make it possible to manage <a href="https://weacast.github.io/weacast-docs/api/layers.html#forecast-data-layers" target="_blank" rel="noopener noreferrer">Weacast map layers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <ul><li><strong>createLeafletForecastLayer(options)</strong> automatically registered Weacast Leaflet layer constructor</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This mixin assumes that your component has initialized its <a href="https://weacast.github.io/weacast-docs/api/application.html#client-setup" target="_blank" rel="noopener noreferrer">Weacast client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the <code>weacastApi</code> property by using e.g. the <a href="/kdk/api/map/mixins.html#weacast">Weacast mixin</a></p></div> <h2 id="map-activity"><a href="#map-activity" class="header-anchor">#</a> Map Activity</h2> <p>Make it easier to create 2D mapping activities:</p> <ul><li><strong>initializeMap()</strong> setup the mapping engine, <strong>should be called first before any other method</strong></li> <li><strong>finalizeMap()</strong> destroy the mapping engine</li></ul> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>It assumes that the DOM element used by the render engine has a ref named <code>map</code></p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kdk/api/map/mixins.html" class="prev">
        Mixins
      </a></span> <span class="next"><a href="/kdk/api/map/globe-mixins.html">
        Globe Mixins
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/kdk/assets/js/app.0d2744f6.js" defer></script><script src="/kdk/assets/js/3.934b6e1d.js" defer></script><script src="/kdk/assets/js/17.600f88a5.js" defer></script><script src="/kdk/assets/js/9.07565a82.js" defer></script>
  </body>
</html>
