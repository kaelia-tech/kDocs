<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Application | KDK</title>
    <meta name="description" content="The Kalisio Development Kit">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kdk/kdk-icon-64x64.png">
  <link rel="manifest" href="/kdk/manifest.json">
    
    <link rel="preload" href="/kdk/assets/css/0.styles.c934418d.css" as="style"><link rel="preload" href="/kdk/assets/js/app.8d5a2dcc.js" as="script"><link rel="preload" href="/kdk/assets/js/9.7233fb04.js" as="script"><link rel="prefetch" href="/kdk/assets/js/10.fec0fca8.js"><link rel="prefetch" href="/kdk/assets/js/11.08318ddd.js"><link rel="prefetch" href="/kdk/assets/js/12.948612e1.js"><link rel="prefetch" href="/kdk/assets/js/13.f67c7c76.js"><link rel="prefetch" href="/kdk/assets/js/14.baa96983.js"><link rel="prefetch" href="/kdk/assets/js/15.b58d4f55.js"><link rel="prefetch" href="/kdk/assets/js/16.96047ba3.js"><link rel="prefetch" href="/kdk/assets/js/17.5e73f2bd.js"><link rel="prefetch" href="/kdk/assets/js/18.77c1b126.js"><link rel="prefetch" href="/kdk/assets/js/19.937c9f09.js"><link rel="prefetch" href="/kdk/assets/js/2.963d7dac.js"><link rel="prefetch" href="/kdk/assets/js/20.f7efc2d2.js"><link rel="prefetch" href="/kdk/assets/js/21.2ab79978.js"><link rel="prefetch" href="/kdk/assets/js/22.262aea1e.js"><link rel="prefetch" href="/kdk/assets/js/23.81f5113d.js"><link rel="prefetch" href="/kdk/assets/js/24.289bd233.js"><link rel="prefetch" href="/kdk/assets/js/25.2b554701.js"><link rel="prefetch" href="/kdk/assets/js/26.340a0851.js"><link rel="prefetch" href="/kdk/assets/js/27.60d29e3e.js"><link rel="prefetch" href="/kdk/assets/js/28.d399f5c8.js"><link rel="prefetch" href="/kdk/assets/js/29.e8f11e5a.js"><link rel="prefetch" href="/kdk/assets/js/3.8310244c.js"><link rel="prefetch" href="/kdk/assets/js/30.7d45f335.js"><link rel="prefetch" href="/kdk/assets/js/31.69d6bcd3.js"><link rel="prefetch" href="/kdk/assets/js/32.c24565f8.js"><link rel="prefetch" href="/kdk/assets/js/33.a82940ee.js"><link rel="prefetch" href="/kdk/assets/js/34.dcef6e01.js"><link rel="prefetch" href="/kdk/assets/js/35.296d713f.js"><link rel="prefetch" href="/kdk/assets/js/36.8087534d.js"><link rel="prefetch" href="/kdk/assets/js/37.7ff2c1ef.js"><link rel="prefetch" href="/kdk/assets/js/38.a95650de.js"><link rel="prefetch" href="/kdk/assets/js/39.9cada594.js"><link rel="prefetch" href="/kdk/assets/js/4.6fd08967.js"><link rel="prefetch" href="/kdk/assets/js/40.3b995c3e.js"><link rel="prefetch" href="/kdk/assets/js/41.c35aaf97.js"><link rel="prefetch" href="/kdk/assets/js/42.f5fd34ba.js"><link rel="prefetch" href="/kdk/assets/js/43.bb3cca71.js"><link rel="prefetch" href="/kdk/assets/js/44.60ca68dc.js"><link rel="prefetch" href="/kdk/assets/js/45.8fec8d21.js"><link rel="prefetch" href="/kdk/assets/js/46.fc2cf47d.js"><link rel="prefetch" href="/kdk/assets/js/47.8d318215.js"><link rel="prefetch" href="/kdk/assets/js/48.d5903564.js"><link rel="prefetch" href="/kdk/assets/js/49.ded45d67.js"><link rel="prefetch" href="/kdk/assets/js/5.9309bde4.js"><link rel="prefetch" href="/kdk/assets/js/50.48743311.js"><link rel="prefetch" href="/kdk/assets/js/51.82a6bdf4.js"><link rel="prefetch" href="/kdk/assets/js/52.8281a793.js"><link rel="prefetch" href="/kdk/assets/js/53.beee17eb.js"><link rel="prefetch" href="/kdk/assets/js/54.9cc67076.js"><link rel="prefetch" href="/kdk/assets/js/55.e26d6987.js"><link rel="prefetch" href="/kdk/assets/js/56.0ba5d498.js"><link rel="prefetch" href="/kdk/assets/js/57.c7039446.js"><link rel="prefetch" href="/kdk/assets/js/58.cbe81c42.js"><link rel="prefetch" href="/kdk/assets/js/6.ad5b6843.js"><link rel="prefetch" href="/kdk/assets/js/7.f9c960ad.js"><link rel="prefetch" href="/kdk/assets/js/8.20334a8c.js">
    <link rel="stylesheet" href="/kdk/assets/css/0.styles.c934418d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kdk/" class="home-link router-link-active"><!----> <span class="site-name">KDK</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">Tips</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/kdk/tips.html" class="nav-link">Tips</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <i><small>Unleashing the potential of spatial information</small></i></p> <ul class="sidebar-links"><li><a href="/kdk/api/" class="sidebar-link">API</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>kCore</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/kdk/api/kcore/" class="sidebar-link">Overview</a></li><li><a href="/kdk/api/kcore/application.html" class="active sidebar-link">Application</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kdk/api/kcore/application.html#application-api" class="sidebar-link">Application API</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kcore/application.html#application-hooks" class="sidebar-link">Application Hooks</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kcore/application.html#permissions" class="sidebar-link">Permissions</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kcore/application.html#client-ecosystem" class="sidebar-link">Client ecosystem</a></li><li class="sidebar-sub-header"><a href="/kdk/api/kcore/application.html#i18n" class="sidebar-link">i18n</a></li></ul></li><li><a href="/kdk/api/kcore/services.html" class="sidebar-link">Services</a></li><li><a href="/kdk/api/kcore/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/kdk/api/kcore/components.html" class="sidebar-link">Components</a></li><li><a href="/kdk/api/kcore/mixins.html" class="sidebar-link">Mixins</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kMap</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kTeam</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kNotify</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kBilling</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>kEvent</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="application"><a href="#application" aria-hidden="true" class="header-anchor">#</a> Application</h1> <p>Kalisio <a href="https://github.com/kalisio/kCore" target="_blank" rel="noopener noreferrer">core module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> offers a thin layer on top of the <a href="https://docs.feathersjs.com/api/application.html" target="_blank" rel="noopener noreferrer">FeathersJS application<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> mainly to simplify the creation and configuration of services. It also provide some helpful concepts and utilities to structure your application right.</p> <h2 id="application-api"><a href="#application-api" aria-hidden="true" class="header-anchor">#</a> Application API</h2> <h3 id="backend-setup"><a href="#backend-setup" aria-hidden="true" class="header-anchor">#</a> Backend setup</h3> <p>Kalisio <a href="https://github.com/kalisio/kCore" target="_blank" rel="noopener noreferrer">core module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides a helper to quickly initialize what is required for your <a href="https://docs.feathersjs.com/api/application.html" target="_blank" rel="noopener noreferrer">server application<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The core module provides the ability to initialize a new Kalisio application instance, attach it to the configured database and setup authentication:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> kalisio <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'kCore'</span>

<span class="token comment">// Initialize app</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">kalisio</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Connect to DB</span>
<span class="token keyword">await</span> app<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="client-setup"><a href="#client-setup" aria-hidden="true" class="header-anchor">#</a> Client setup</h3> <p>Kalisio <a href="https://github.com/kalisio/kCore" target="_blank" rel="noopener noreferrer">core module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides a helper to quickly initialize what is required for your <a href="https://docs.feathersjs.com/api/client.html" target="_blank" rel="noopener noreferrer">client application<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> kalisio <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'kCore/client'</span>

<span class="token comment">// Initialize API wrapper</span>
<span class="token keyword">let</span> api <span class="token operator">=</span> <span class="token function">kalisio</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Retrieve a given service</span>
<span class="token keyword">let</span> users <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h3> <p>Any value from the backend <a href="/kdk/guides/basics/step-by-step.html#configuring-the-app">configuration</a> can be directly retrieved on the application object like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> value <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'property'</span><span class="token punctuation">)</span>
</code></pre></div><p>Any value from the frontend <a href="/kdk/guides/basics/step-by-step.html#configuring-the-app">configuration</a> can be directly retrieved by importing it like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'config'</span>

<span class="token keyword">const</span> value <span class="token operator">=</span> config<span class="token punctuation">.</span>property
</code></pre></div><blockquote><p>Under the hood <a href="https://github.com/feathersjs/configuration" target="_blank" rel="noopener noreferrer">FeathersJS configuration module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/lorenwest/node-config" target="_blank" rel="noopener noreferrer">node-config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are used to manage configuration so that any related concept to organise your configuration according to deployment options can be used.</p></blockquote> <h3 id="getservice-name-context"><a href="#getservice-name-context" aria-hidden="true" class="header-anchor">#</a> getService(name, context)</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>backend/client</p></div> <p>Retrieve the given service by name, should replace <a href="https://docs.feathersjs.com/api/application.html#servicepath" target="_blank" rel="noopener noreferrer">Feathers service method<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> so that you are abstracted away from the internal service path (i.e. API prefix and context ID) and only refer to it by its &quot;usual&quot; name.</p> <blockquote><p>On the client side this is also used to instanciate the service on first call.</p></blockquote> <h3 id="createservice-name-options"><a href="#createservice-name-options" aria-hidden="true" class="header-anchor">#</a> createService(name, options)</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>backend only</p></div> <p>Create a new service attached to the application by name and given a set of options:</p> <ul><li><strong>context</strong>: the context object the service will be contextual to, if given the internal service path will be <code>contextId/serviceName</code></li> <li><strong>modelsPath</strong>: directory where to find model declaration (optional), if provided will initiate a DB service based on the model file</li> <li><strong>servicesPath</strong>: directory where to find service declaration (optional), if provided for a non-DB service will initiate a service based on the returned object or constructor function from the service module, for a DB service it will apply the provided mixin object coming from the service module</li> <li><strong>fileName</strong>: by default the function will look to a model/service file named after the service name, this option allows to override it</li> <li><strong>events</strong>: <a href="https://docs.feathersjs.com/api/events.html#service-events" target="_blank" rel="noopener noreferrer">service events<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to be used by the service</li> <li><strong>perspectives</strong>: the <em>perspectives</em> of the model that will not be retrieved by default except if <a href="https://docs.feathersjs.com/api/databases/querying.html#select" target="_blank" rel="noopener noreferrer"><code>$select</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used</li> <li><strong>proxy</strong>: options for a service to be proxied by the created service
<ul><li><strong>service</strong>: the name of the proxied service</li> <li><strong>params</strong>: the parameters to be used when calling the proxied service, either an object or a function returning the object and applied on the input parameters</li> <li><strong>id</strong>: the id map function to be used when calling the proxied service, will be applied on the input id</li> <li><strong>data</strong>: the data map function to be used when calling the proxied service, will be applied on the input the object</li> <li><strong>result</strong>: the result map to be used when calling the proxied service, will be applied on the returning the object(s)</li></ul></li></ul> <p>Depending on the options you have to create a <em>models</em> and <em>services</em> directories containing the required files to declare your services, e.g. your folder/file hierarchy should look like this:</p> <ul><li><em>index.js</em>: contains adefault function instantiating all the services</li> <li><em>models</em> : constains one file per database adapter you'd like to support
<ul><li><em>serviceName.model.mongodb.js</em> : exporting the data model managed by your service in <a href="https://docs.feathersjs.com/api/databases/mongodb.html" target="_blank" rel="noopener noreferrer">MongoDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li><em>serviceName.model.levelup.js</em> : exporting the data model managed by your service in <a href="https://github.com/feathersjs/feathers-levelup" target="_blank" rel="noopener noreferrer">LevelUP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li>...</li></ul></li> <li><em>services</em> <ul><li><em>serviceName</em> <ul><li><em>serviceName.hooks.js</em> : exporting the <a href="https://docs.feathersjs.com/api/hooks.html" target="_blank" rel="noopener noreferrer">hooks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of your service,</li> <li><em>serviceName.filters.js</em> : exporting the <a href="https://docs.feathersjs.com/api/events.html#event-filtering" target="_blank" rel="noopener noreferrer">filters<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of your service,</li> <li><em>serviceName.service.js</em> : exporting the specific mixin or mixin constructor function associated to your service (optional)</li></ul></li></ul></li></ul> <h2 id="application-hooks"><a href="#application-hooks" aria-hidden="true" class="header-anchor">#</a> Application Hooks</h2> <p>The following <a href="./HOOKS.MD">hooks</a> are usually globally executed on the application:</p> <p><img src="/kdk/assets/img/application-hooks.e15ca2e0.svg" alt="Application hooks"></p> <h2 id="permissions"><a href="#permissions" aria-hidden="true" class="header-anchor">#</a> Permissions</h2> <p>Isomorphic permissions management system.</p> <p><strong>TODO</strong></p> <h2 id="client-ecosystem"><a href="#client-ecosystem" aria-hidden="true" class="header-anchor">#</a> Client ecosystem</h2> <h3 id="events"><a href="#events" aria-hidden="true" class="header-anchor">#</a> Events</h3> <p>We use the <a href="https://alligator.io/vuejs/global-event-bus/" target="_blank" rel="noopener noreferrer">global event bus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provided by Quasar to exchange events between independent components in the app:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Events <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'quasar'</span>

<span class="token comment">// Register callback on event</span>
<span class="token keyword">const</span> <span class="token function-variable function">myCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
Events<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'myEvent'</span><span class="token punctuation">,</span> myCallback<span class="token punctuation">)</span>
<span class="token comment">// Unregister it</span>
Events<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'myEvent'</span><span class="token punctuation">,</span> myCallback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>The event bus is notably used to be aware of state changes in the global store (see hereafter)</p></blockquote> <h3 id="store"><a href="#store" aria-hidden="true" class="header-anchor">#</a> Store</h3> <p>A component-based system like the one offered by KDK has its local and global states. Each component has its local data, but the application has a global application state that can be accessed by any component of the application. This is the purpose of the <strong>Store</strong> singleton object: allow to get or update the global state and make any interested component aware of it in real-time through events. The available API is illustrated by this code sample:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'kCore/client'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Events <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'quasar'</span>

<span class="token keyword">const</span> <span class="token function-variable function">myCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">,</span> previousValue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

Store<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'myGlobal'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// Set a root object</span>
Store<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token string">'myGlobal'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> property<span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// Set a specific group of properties</span>
Store<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'myGlobal.property'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment">// Set a specific property path</span>
Store<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'myGlobal.property'</span><span class="token punctuation">,</span> defaultValue<span class="token punctuation">)</span> <span class="token comment">// defaultValue is returned if path is not found</span>
Events<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'myGlobal-changed'</span><span class="token punctuation">,</span> myCallback<span class="token punctuation">)</span> <span class="token comment">// When updating a root object</span>
Events<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'myGlobal-property-changed'</span><span class="token punctuation">,</span> myCallback<span class="token punctuation">)</span> <span class="token comment">// When updating a specific property path</span>
</code></pre></div><h3 id="context"><a href="#context" aria-hidden="true" class="header-anchor">#</a> Context</h3> <p><strong>TODO</strong></p> <h2 id="i18n"><a href="#i18n" aria-hidden="true" class="header-anchor">#</a> i18n</h2> <h3 id="client-side-internationalization"><a href="#client-side-internationalization" aria-hidden="true" class="header-anchor">#</a> Client-side internationalization</h3> <p>Internationalization relies on <a href="https://github.com/i18next/i18next" target="_blank" rel="noopener noreferrer">i18next<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and its <a href="https://github.com/panter/vue-i18next" target="_blank" rel="noopener noreferrer">Vue plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. We don't use <a href="https://panter.github.io/vue-i18next/guide/component.html" target="_blank" rel="noopener noreferrer">component based localization<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and prefer to use <a href="https://panter.github.io/vue-i18next/guide/component-interpolation.html" target="_blank" rel="noopener noreferrer">component interpolation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Each module/application has its own set of translation files stored in the <em>client/i18n</em> folder. To avoid conflicts the convention we use is the following:</p> <ul><li>a translation used in mulitple components has no prefix</li> <li>a translation used in a single component is prefixed by the source component name</li> <li>some prefixs are reserved
<ul><li><code>errors</code> for error messages</li> <li><code>schemas</code> for labels in JSON schemas</li></ul></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;CANCEL&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cancel&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errors&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;400&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Operation cannot be performed: bad parameters&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;schemas&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;AVATAR_FIELD_HELPER&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Select an avatar&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;KScreen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;CLIENT_VERSION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Client version&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span>
  ...
<span class="token punctuation">}</span>
</code></pre></div><p>The setup of your application simply consists in providing to the i18n system the resolvers to load all the required translation files, please refer to our <a href="https://github.com/kalisio/kApp/blob/master/src/i18n/index.js" target="_blank" rel="noopener noreferrer">application template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="server-side-internationalization"><a href="#server-side-internationalization" aria-hidden="true" class="header-anchor">#</a> Server-side internationalization</h3> <p>Usually translations are only meant to be used at the client level, server errors are converted to client-side translation based on error codes. However, sometimes you need to raise more specific and meaningful error messages from the server, in this case the raised error should contain translation key(s) and context instead of raw message(s), e.g.:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BadRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@feathersjs/errors'</span>

  <span class="token comment">// Somewhere in a hook or service</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequest</span><span class="token punctuation">(</span><span class="token string">'The provided password does not comply to the password policy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    translation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> <span class="token string">'WEAK_PASSWORD'</span><span class="token punctuation">,</span>
      params<span class="token punctuation">:</span> <span class="token punctuation">{</span> failedRules<span class="token punctuation">:</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>That way you can generate client-side translation with a generic error handler like in our <a href="https://github.com/kalisio/kApp/blob/master/src/App.vue" target="_blank" rel="noopener noreferrer">application template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>Events<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Translate the message if a translation key exists</span>
  <span class="token keyword">const</span> translation <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> <span class="token string">'data.translation'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>translation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    error<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'errors.'</span> <span class="token operator">+</span> translation<span class="token punctuation">.</span>key<span class="token punctuation">,</span> translation<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Overwrite the message using error code</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      error<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'errors.'</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/kdk/api/kcore/" class="prev router-link-active">
          Overview
        </a></span> <span class="next"><a href="/kdk/api/kcore/services.html">
          Services
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/kdk/assets/js/app.8d5a2dcc.js" defer></script><script src="/kdk/assets/js/9.7233fb04.js" defer></script>
  </body>
</html>
