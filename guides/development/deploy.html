<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy your app | KDK</title>
    <meta name="description" content="The Kalisio Development Kit">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kdk/kdk-icon-64x64.png">
  <link rel="manifest" href="/kdk/manifest.json">
    
    <link rel="preload" href="/kdk/assets/css/0.styles.c934418d.css" as="style"><link rel="preload" href="/kdk/assets/js/app.64db210f.js" as="script"><link rel="preload" href="/kdk/assets/js/7.6a33ecde.js" as="script"><link rel="prefetch" href="/kdk/assets/js/10.0ccaec71.js"><link rel="prefetch" href="/kdk/assets/js/11.4c75afde.js"><link rel="prefetch" href="/kdk/assets/js/12.46873865.js"><link rel="prefetch" href="/kdk/assets/js/13.aca23cb9.js"><link rel="prefetch" href="/kdk/assets/js/14.e7273a09.js"><link rel="prefetch" href="/kdk/assets/js/15.07854dac.js"><link rel="prefetch" href="/kdk/assets/js/16.323fd1a8.js"><link rel="prefetch" href="/kdk/assets/js/17.21636f4c.js"><link rel="prefetch" href="/kdk/assets/js/18.50528429.js"><link rel="prefetch" href="/kdk/assets/js/19.f353c8f6.js"><link rel="prefetch" href="/kdk/assets/js/2.17bd8a1a.js"><link rel="prefetch" href="/kdk/assets/js/20.4613e1ed.js"><link rel="prefetch" href="/kdk/assets/js/21.99fd5d39.js"><link rel="prefetch" href="/kdk/assets/js/22.7ab2385c.js"><link rel="prefetch" href="/kdk/assets/js/23.40ac6b2f.js"><link rel="prefetch" href="/kdk/assets/js/24.d8decd7b.js"><link rel="prefetch" href="/kdk/assets/js/25.aad120c9.js"><link rel="prefetch" href="/kdk/assets/js/26.e8187f0e.js"><link rel="prefetch" href="/kdk/assets/js/27.123ce4f6.js"><link rel="prefetch" href="/kdk/assets/js/28.234ae277.js"><link rel="prefetch" href="/kdk/assets/js/29.fa3b2c45.js"><link rel="prefetch" href="/kdk/assets/js/3.cb433d3c.js"><link rel="prefetch" href="/kdk/assets/js/30.0dac8326.js"><link rel="prefetch" href="/kdk/assets/js/31.632ac575.js"><link rel="prefetch" href="/kdk/assets/js/32.33fba78f.js"><link rel="prefetch" href="/kdk/assets/js/33.134d9cb0.js"><link rel="prefetch" href="/kdk/assets/js/34.5de13caa.js"><link rel="prefetch" href="/kdk/assets/js/35.53dfc9a1.js"><link rel="prefetch" href="/kdk/assets/js/36.e6425685.js"><link rel="prefetch" href="/kdk/assets/js/37.a0e7c6dc.js"><link rel="prefetch" href="/kdk/assets/js/38.6128bce1.js"><link rel="prefetch" href="/kdk/assets/js/39.406bb7d5.js"><link rel="prefetch" href="/kdk/assets/js/4.795efc09.js"><link rel="prefetch" href="/kdk/assets/js/40.093c3720.js"><link rel="prefetch" href="/kdk/assets/js/41.79e3c101.js"><link rel="prefetch" href="/kdk/assets/js/42.044b61c6.js"><link rel="prefetch" href="/kdk/assets/js/43.239ce6ec.js"><link rel="prefetch" href="/kdk/assets/js/44.a20413d3.js"><link rel="prefetch" href="/kdk/assets/js/45.45f9322e.js"><link rel="prefetch" href="/kdk/assets/js/46.7f7112ef.js"><link rel="prefetch" href="/kdk/assets/js/47.31a383f1.js"><link rel="prefetch" href="/kdk/assets/js/48.84e1a2e0.js"><link rel="prefetch" href="/kdk/assets/js/49.6032657f.js"><link rel="prefetch" href="/kdk/assets/js/5.01771294.js"><link rel="prefetch" href="/kdk/assets/js/50.d11b117a.js"><link rel="prefetch" href="/kdk/assets/js/51.cdc13dbb.js"><link rel="prefetch" href="/kdk/assets/js/52.011f5d65.js"><link rel="prefetch" href="/kdk/assets/js/53.29e5955a.js"><link rel="prefetch" href="/kdk/assets/js/54.d2b2fc5f.js"><link rel="prefetch" href="/kdk/assets/js/55.579376ad.js"><link rel="prefetch" href="/kdk/assets/js/56.6b183740.js"><link rel="prefetch" href="/kdk/assets/js/6.331c36f5.js"><link rel="prefetch" href="/kdk/assets/js/8.c9e313b3.js"><link rel="prefetch" href="/kdk/assets/js/9.b944aae6.js">
    <link rel="stylesheet" href="/kdk/assets/css/0.styles.c934418d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kdk/" class="home-link router-link-active"><!----> <span class="site-name">KDK</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link router-link-active">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kdk/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/kdk/guides/" class="nav-link router-link-active">Guides</a></div><div class="nav-item"><a href="/kdk/architecture/" class="nav-link">Architecture</a></div><div class="nav-item"><a href="/kdk/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/kdk/tools/" class="nav-link">Tools</a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <i><small>Unleashing the potential of spatial information</small></i></p> <ul class="sidebar-links"><li><a href="/kdk/guides/" class="sidebar-link">Guides</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>The Basics</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Development</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/kdk/guides/development/setup.html" class="sidebar-link">Setup your environment</a></li><li><a href="/kdk/guides/development/develop.html" class="sidebar-link">Develop with KDK</a></li><li><a href="/kdk/guides/development/publish.html" class="sidebar-link">Publish a release</a></li><li><a href="/kdk/guides/development/deploy.html" class="active sidebar-link">Deploy your app</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#deployment-pipeline" class="sidebar-link">Deployment pipeline</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#web-app" class="sidebar-link">Web app</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#plugins" class="sidebar-link">Plugins</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#security" class="sidebar-link">Security</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/kdk/guides/development/deploy.html#secret-archive" class="sidebar-link">Secret archive</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="deploy-your-app"><a href="#deploy-your-app" aria-hidden="true" class="header-anchor">#</a> Deploy your app</h1> <h2 id="deployment-pipeline"><a href="#deployment-pipeline" aria-hidden="true" class="header-anchor">#</a> Deployment pipeline</h2> <p>The global deployment pipeline is illustrated in the following schema:</p> <p><img src="/kdk/assets/img/cd-pipeline.79fa1089.svg" alt="Deployment pipeline"></p> <h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h2> <h3 id="configure-third-party-services"><a href="#configure-third-party-services" aria-hidden="true" class="header-anchor">#</a> Configure third-party services</h3> <p>Depending on the services you need you will have to do the following:</p> <ul><li>Create a Firebase app in the <a href="https://console.firebase.google.com" target="_blank" rel="noopener noreferrer">Firebase Console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li>retrieve the <code>google-services.json</code> to be stored as a secret file in the <em>cordova</em> directory</li> <li>create an Android app in your Firebase app and keep track of secret server key in <em>Parameters &gt; Cloud Messaging</em></li></ul></li> <li>Create a GCM application in the <a href="https://eu-west-1.console.aws.amazon.com/sns/v2/home" target="_blank" rel="noopener noreferrer">AWS SNS console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> using the previous server key
<ul><li>keep track of app ARN</li></ul></li> <li>Create a new project for your app in the <a href="https://console.cloud.google.com" target="_blank" rel="noopener noreferrer">Google Cloud Console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li>Activate the Google+ API on your project</li></ul></li> <li>Create an OAuth2 ID for a Web App in <a href="https://console.cloud.google.com" target="_blank" rel="noopener noreferrer">Google Cloud Console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt; <em>API &amp; services</em> <ul><li>the redirect URL should match <em>your.domain/auth/google/callback</em></li> <li>download the <em>json</em> dans keep track of client ID and secret</li></ul></li> <li>Create an OAuth2 App in <a href="https://github.com/organizations/kalisio/settings/applications" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li>the redirect URL should match <em>your.domain/auth/github/callback</em></li> <li>download the <em>json</em> dans keep track of client ID and secret</li></ul></li> <li>Create an AWS user in <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with access to S3 API (e.g. <em>AmazonS3FullAccess</em>)
<ul><li>keep track of access key ID and secret</li></ul></li> <li>Create a bucket for your app in the Kalisio account
<ul><li>keep track of its name</li></ul></li> <li>Create an AWS user in <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with access to SNS API (e.g. <em>AmazonSNSFullAccess</em>)
<ul><li>keep track of access key ID and secret</li></ul></li></ul> <p>Create required environment variables in a script file you can source before launching your app:</p> <div class="language- extra-class"><pre class="language-text"><code>export GOOGLE_MAIL_USER=xxx
export GOOGLE_MAIL_PASSWORD=xxx
export SNS_ACCESS_KEY=xxx
export SNS_SECRET_ACCESS_KEY=xxx
export SNS_ANDROID_ARN=xxx
export S3_ACCESS_KEY=xxx
export S3_SECRET_ACCESS_KEY=xxx
export S3_BUCKET=xxx
export GITHUB_CLIENT_ID=xxx
export GITHUB_CLIENT_SECRET=xxx
export GOOGLE_CLIENT_ID=xxx
export GOOGLE_CLIENT_SECRET=xxx
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Note: some of the previous accounts/IDs are not app specific and can be share accross multiple apps, e.g. S3, SNS, etc.</p></div> <p>Most information here should be <a href="./PUBLISH.MD#security">secured</a> and <strong>should not be pushed under source control unless you use private repositories (and even in this case it is best to secure it)</strong>.</p> <h3 id="configure-continuous-integration-and-delivery"><a href="#configure-continuous-integration-and-delivery" aria-hidden="true" class="header-anchor">#</a> Configure continuous integration and delivery</h3> <p>We heavily rely on <a href="https://travis-ci.org" target="_blank" rel="noopener noreferrer">Travis CI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for continuous integration and delivery, as such the best is to create a <em>secrets.tar</em> containing all secured files and encode it to <em>secrets.tar.enc</em> a using <a href="https://github.com/kalisio/kdk/blob/master/tools/CLI.MD#travis-cli" target="_blank" rel="noopener noreferrer">Travis CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. This file will be decrypted before the build or whenever you need something inside.</p> <h3 id="install-change-log-generator"><a href="#install-change-log-generator" aria-hidden="true" class="header-anchor">#</a> Install Change log generator</h3> <p>This <a href="https://github.com/skywinder/github-changelog-generator" target="_blank" rel="noopener noreferrer">gem<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> generates a change log file based on <strong>tags</strong>, <strong>issues</strong> and merged <strong>pull requests</strong> (and splits them into separate lists according to labels) from :octocat: GitHub Issue Tracker. This requires you to install (e.g. for Windows) <a href="http://rubyinstaller.org/downloads/" target="_blank" rel="noopener noreferrer">Ruby<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and its <a href="https://github.com/oneclick/rubyinstaller/wiki/Development-Kit" target="_blank" rel="noopener noreferrer">DevKit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="web-app"><a href="#web-app" aria-hidden="true" class="header-anchor">#</a> Web app</h2> <p>The same process applies when releasing a patch, minor or major version, i.e. the following tasks are done:</p> <ul><li>increase the package version number in the <strong>package.json</strong> file (frontend and backend API)</li> <li>create a tag accordingly in the git repository and push it</li> <li>generates the changelog in the git repository and push it</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Before you publish your app take care of updating the version of all dependent plugins to the latest version published, for example  perform <code>yarn upgrade kCore kTeam kClient</code></p></div> <p>Depending on the release type the following command will do the job (where type is either <code>patch</code>, <code>minor</code>, <code>major</code>):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>yarn/npm run release:type
</code></pre></div><p>Because Kalisio web app are also released as Docker images you can build it like this:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker build -t kalisio/kapp <span class="token keyword">.</span>
</code></pre></div><p>Then release it as latest version:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker login
docker push kalisio/kapp
</code></pre></div><p>And tag it (<code>version_tag</code> being the current version number like <code>1.1.2</code>)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker tag kalisio/kapp kalisio/kapp:version_tag
docker push kalisio/kapp:version_tag
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>This requires you to have a DockerHub account and be a team member of the Kalisio organization, if you'd like to become a maintainer please tell us</p></div> <h2 id="plugins"><a href="#plugins" aria-hidden="true" class="header-anchor">#</a> Plugins</h2> <p>The same process applies as for the web app but in addition the module is published on the NPM registry.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>This requires you to have a NPM and GitHub account and be a team member of the Kalisio organization, if you'd like to become a maintainer please tell us</p></div> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Before you publish a plugin take care of updating the version of your dependent plugins to the latest version published, for example  perform <code>yarn upgrade kCore</code> for a plugin depending on the core plugin before publishing it</p></div> <h2 id="security"><a href="#security" aria-hidden="true" class="header-anchor">#</a> Security</h2> <p>As an application often relies on third-party services its configuration must include secrets like API keys, passwords, etc. In this section we detail how we manage it in a secure way.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</p></div> <h3 id="using-environment-variables"><a href="#using-environment-variables" aria-hidden="true" class="header-anchor">#</a> Using environment variables</h3> <p>Environment variables might be used to store secrets then retrieved in config files like this:</p> <div class="language- extra-class"><pre class="language-text"><code>github: {
  clientID: process.env.GITHUB_CLIENT_ID,
  clientSecret: process.env.GITHUB_CLIENT_SECRET
}
</code></pre></div><p>In your local development environment you should use a script to setup all the required secrets. This script should be safe-guarded in a non-public environment.</p> <p>When using Travis CI you can use <a href="https://docs.travis-ci.com/user/environment-variables/" target="_blank" rel="noopener noreferrer">encrypted variables<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> set either in build file or repository settings.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>If you'd like to set a value holding multilines or special characters take care to surround it with <code>&quot;</code> so that it will be properly escaped.**</p></div> <h2 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h2> <h3 id="services"><a href="#services" aria-hidden="true" class="header-anchor">#</a> Services</h3> <h3 id="sensitive-data"><a href="#sensitive-data" aria-hidden="true" class="header-anchor">#</a> Sensitive data</h3> <p>To set up the CI/CD pipeline, sensitive data are needed to access the different services and api. If some of these data can be stored using environment variables, others are stored through files and need to be pushed within the respoitory. For this purpose Travis CI offer a way to store these files within a <a href="https://docs.travis-ci.com/user/encryption-keys/" target="_blank" rel="noopener noreferrer">unique encrypted archive<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="secret-archive"><a href="#secret-archive" aria-hidden="true" class="header-anchor">#</a> Secret archive</h2> <h3 id="secret-files"><a href="#secret-files" aria-hidden="true" class="header-anchor">#</a> Secret files</h3> <p>The table below lists all the required files:</p> <table><thead><tr><th style="text-align:left">File</th> <th style="text-align:left">Description</th></tr></thead> <tbody><tr><td style="text-align:left">keystore file</td> <td style="text-align:left">A binary file containing the private key of the certificate you need to sign the Android app</td></tr> <tr><td style="text-align:left">cordova build file</td> <td style="text-align:left">A Json file used by Cordova to sign the generated application. It uses the keystore file</td></tr> <tr><td style="text-align:left">google play service account</td> <td style="text-align:left">A Json file storing the data needed to use the Google Play service account</td></tr> <tr><td style="text-align:left">google services account</td> <td style="text-align:left">A Json file storing the the keys to access the various Google services</td></tr></tbody></table> <h3 id="creating-the-archive"><a href="#creating-the-archive" aria-hidden="true" class="header-anchor">#</a> Creating the archive</h3> <p>As mentioned in the <a href="https://docs.travis-ci.com/user/encrypting-files/#Encrypting-multiple-files" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, is it not possible to encrypt multiple files. It is then required to create a <code>tar</code> file containing the different secret files and then to encrypt the archive.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>You need to be logged in to Travis CI.</p></div> <div class="language- extra-class"><pre class="language-text"><code>tar cvf secrets.tar your_keystore.keystore build.json google-play.json google-services.json
travis encrypt-file secrets.tar
</code></pre></div><p>Do not push the secret files on your repository but keep them in a secure place !</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/kdk/guides/development/publish.html" class="prev">
          Publish a release
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/kdk/assets/js/app.64db210f.js" defer></script><script src="/kdk/assets/js/7.6a33ecde.js" defer></script>
  </body>
</html>
