(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{542:function(e,t,a){"use strict";a.r(t);var s=a(13),o=function(e){e.options.__data__block__={mermaid_382ee167:'graph TB\n  beforeAll{none before all}\n  afterAll{after all}\n  afterAll --\x3e hook1("discard(\'passwords\')")\n  hook1 -- Email/Name extracted from profile --\x3e hook2("serialize(\'profile\')")\n  beforeAll --\x3e FIND[FIND]\n  FIND --\x3e afterAll\n  beforeAll --\x3e GET[GET]\n  GET --\x3e afterAll\n  beforeAll --\x3e hook3("serialize(\'OAuth2 profile\')")\n  hook3 -- Email/Name extracted from provider --\x3e hook4("serialize(\'profile\')")\n  hook4 -- Email/Name set in profile --\x3e hook5("serialize(\'clearPassword\')")\n  hook5 -- Clear password saved --\x3e hook6("hashPassword")\n  hook6 -- Password hashed --\x3e hook7("enforcePasswordPolicy")\n  hook7 -- Clear password validated --\x3e hook8("discard(\'clearPassword\')")\n  hook8 -- Clear password removed --\x3e CREATE[CREATE]\n  CREATE --\x3e hook9(updateAbilities)\n  hook9 -- Abilities initialized in cache --\x3e afterAll\n  beforeAll --\x3e hook10(populatePreviousObject)\n  hook10 -- Previous user as params --\x3e hook11(storePreviousPassword)\n  hook11 -- Previous password list updated --\x3e UPDATE[UPDATE]\n  UPDATE --\x3e afterAll\n  beforeAll --\x3e hook12(populatePreviousObject)\n  hook12 -- Previous user as params --\x3e hook13(storePreviousPassword)\n  hook13 -- Previous password list updated --\x3e PATCH[PATCH]\n  PATCH --\x3e afterAll\n  beforeAll --\x3e REMOVE[REMOVE]\n  REMOVE --\x3e afterAll\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4,hook5,hook6,hook7,hook8,hook9,hook10,hook11,hook12,hook13 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass',mermaid_382ee1c8:"graph TB\n  before{none before all}\n  after{none after all}\n  before --\x3e UPDATE[UPDATE]\n  UPDATE --\x3e after\n  before --\x3e hook1(\"disallow('external')\")\n  hook1 --\x3e CREATE[CREATE]\n  CREATE --\x3e after\n  before --\x3e REMOVE[REMOVE]\n  REMOVE --\x3e after\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass",mermaid_382ee225:"graph TB\n  before{none before all}\n  after{none after all}\n  before -- Subject service as data/params<br/>Resource as data/params --\x3e hook1(populateSubjects)\n  hook1 -- Authorisation subjects as params --\x3e hook2(populateResource)\n  hook2 -- Authorisation resource as params --\x3e CREATE[CREATE]\n  CREATE --\x3e after\n  before -- Subject service as query/params<br/>Resource id as query/params --\x3e hook3(populateSubjects)\n  hook3 -- Authorisation subjects as params --\x3e hook4(populateResource)\n  hook4 -- Authorisation resource as params --\x3e REMOVE[REMOVE]\n  REMOVE --\x3e after\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass",mermaid_64a5709a:"graph TB\n  before{none before all}\n  after{none after all}\n  before --\x3e FIND[FIND]\n  FIND --\x3e after\n  before --\x3e GET[GET]\n  GET --\x3e after\n  before -- Optional resource as data/params --\x3e hook2(populateTagResource)\n  hook2 -- Tag resource as params --\x3e hook3(addTagIfNew)\n  hook3 -- Created or patched tag<br/>by recursive call --\x3e CREATE[CREATE]\n  CREATE --\x3e hook4(tagResource)\n  hook4 -- Updated resource --\x3e after\n  before --\x3e UPDATE[UPDATE]\n  UPDATE --\x3e hook5(\"updateOrgResource('tags')\")\n  hook5 -- Updated tagged members --\x3e after\n  before --\x3e PATCH[PATCH]\n  PATCH --\x3e hook6(\"updateOrgResource('tags')\")\n  hook6 -- Updated tagged members --\x3e after\n  before -- Optional resource as query/params --\x3e hook7(populateTagResource)\n  hook7 -- Tag resource as params --\x3e hook8(removeTagIfUnused)\n  hook8 -- Removed or patched tag<br/>by recursive call --\x3e REMOVE[REMOVE]\n  REMOVE --\x3e hook9(untagResource)\n  hook9 -- Updated resource --\x3e after\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4,hook5,hook6,hook7,hook8,hook9 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass",mermaid_64a56fb2:"graph TB\n  before{none before all}\n  after{none after all}\n  before --\x3e hook1(disallow)\n  hook1 --\x3e FIND[FIND]\n  FIND --\x3e after\n  before --\x3e GET[GET]\n  GET --\x3e after\n  before -- Optional resource as data/params --\x3e hook2(populateAttachmentResource)\n  hook2 -- Attachment resource as params --\x3e CREATE[CREATE]\n  CREATE -- Blob created --\x3e hook3(attachToResource)\n  hook3 -- Updated resource --\x3e hook4(\"discard('uri')\")\n  hook4 --\x3e after\n  before --\x3e hook5(disallow)\n  hook5 --\x3e UPDATE[UPDATE]\n  UPDATE --\x3e after\n  before --\x3e hook6(disallow)\n  hook6 --\x3e PATCH[PATCH]\n  PATCH --\x3e after\n  before -- Optional resource as query/params --\x3e hook7(populateAttachmentResource)\n  hook7 -- Attachment resource as params --\x3e REMOVE[REMOVE]\n  REMOVE -- Blob removed --\x3e hook8(detachFromResource)\n  hook8 -- Updated resource --\x3e hook9(\"discard('uri')\")\n  hook9 --\x3e after\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4,hook5,hook6,hook7,hook8,hook9 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass",mermaid_64a5685e:"graph TB\n  before{none before all}\n  after{none after all}\n  before --\x3e FIND[FIND]\n  FIND --\x3e after\n  before --\x3e GET[GET]\n  GET --\x3e after\n  before --\x3e CREATE[CREATE]\n  CREATE --\x3e after\n  before --\x3e UPDATE[UPDATE]\n  UPDATE --\x3e hook1(\"updateOrgResource('groups')\")\n  hook1 -- Updated authorization scopes on members --\x3e after\n  before --\x3e PATCH[PATCH]\n  PATCH --\x3e hook2(\"updateOrgResource('groups')\")\n  hook2 -- Updated authorization scopes on members --\x3e after\n  before --\x3e REMOVE[REMOVE]\n  REMOVE --\x3e after\n  linkStyle default stroke-width:2px,fill:none,stroke:black\n  classDef hookClass fill:#f96,stroke:#333,stroke-width:2px\n  class hook1,hook2,hook3,hook4,hook5,hook6,hook7,hook8,hook9 hookClass\n  classDef operationClass fill:#9c6,stroke:#333,stroke-width:2px\n  class FIND,GET,CREATE,UPDATE,PATCH,REMOVE operationClass"}},r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"services"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[e._v("#")]),e._v(" Services")]),e._v(" "),a("h2",{attrs:{id:"users-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#users-service"}},[e._v("#")]),e._v(" Users service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global service")])]),e._v(" "),a("h3",{attrs:{id:"data-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of a user as used by the API is "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#user-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("users")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_382ee167",graph:e.$dataBlock.mermaid_382ee167}}),a("h2",{attrs:{id:"devices-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devices-service"}},[e._v("#")]),e._v(" Devices service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global service")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("update")]),e._v(" and "),a("code",[e._v("remove")]),e._v(" methods are the only ones allowed from the client side\n"),a("code",[e._v("create")]),e._v(" method is only allowed from the server side")])]),e._v(" "),a("p",[a("code",[e._v("create")]),e._v(" (respectively "),a("code",[e._v("remove")]),e._v(") creates (respectively removes) the device to/from the notification system (APNS or Firebase).\n"),a("code",[e._v("update")]),e._v(" updates the device registration ID or create it if not yet created.")]),e._v(" "),a("h3",{attrs:{id:"data-model-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-2"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of a device as used by the API is "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#device-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Devices are store in the "),a("code",[e._v("devices")]),e._v(" property of the user they belong to.")])]),e._v(" "),a("h3",{attrs:{id:"hooks-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-2"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("devices")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_382ee1c8",graph:e.$dataBlock.mermaid_382ee1c8}}),a("h2",{attrs:{id:"authorisations-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authorisations-service"}},[e._v("#")]),e._v(" Authorisations service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global service")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("create")]),e._v(" and "),a("code",[e._v("remove")]),e._v(" methods are the only one allowed from the client/server side")])]),e._v(" "),a("h3",{attrs:{id:"data-model-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-3"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("An authorisation consists in associating a "),a("em",[e._v("resource")]),e._v(" object (e.g. a group) with a "),a("em",[e._v("subject")]),e._v(" object (e.g. a user) according to a "),a("em",[e._v("permission")]),e._v(" (i.e. a role or a right). The resource object information and the permission are directly stored on the target subject(s) in a property called the "),a("em",[e._v("scope")]),e._v(" of the authorisation (e.g. "),a("code",[e._v("groups")]),e._v(" to store all groups a user belongs to).")]),e._v(" "),a("p",[e._v("For instance the groups a user belongs to with different roles will result in the following structure on the user:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("groups: [\n  {\n      _id: ObjectId('5f568ba1fc54a1002fe6fe37'),\n      name: 'Centre de Castelnaudary',\n      context: '5f55f4169f6d47002f05f4ac',\n      permissions: 'owner'\n      ...\n  },\n  {\n      _id: ObjectId('5f64a3791a1714002f68437d'),\n      name: 'Kalisio',\n      context: '5f532d439f6d47002f04f07e',\n      permissions: 'manager'\n      ...\n  },\n  {\n      _id: ObjectId('5f65e34a75b663003095f52e'),\n      name: 'LTD',\n      context: '5f65d98084f9d5003039b55b',\n      permissions: 'member'\n      ...\n  }\n]\n")])])]),a("h3",{attrs:{id:"hooks-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-3"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("authorisations")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_382ee225",graph:e.$dataBlock.mermaid_382ee225}}),a("h2",{attrs:{id:"tags-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tags-service"}},[e._v("#")]),e._v(" Tags service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global and a contextual service")])]),e._v(" "),a("p",[e._v('Tags can be created directly using this service or by "tagging" a target resource (e.g. a user). As a consequence, '),a("code",[e._v("create")]),e._v("/"),a("code",[e._v("remove")]),e._v(" operations can include a target resource as input data/ID.")]),e._v(" "),a("p",[e._v("Due to this behaviour tags are created/removed by value, not by ID. To avoid duplication when tagging multiple resources with the same tag, the service manages a reference count on tag objects and they are automatically created/removed accordingly.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("remove")]),e._v(" method can be called with a resource ID")])]),e._v(" "),a("h3",{attrs:{id:"data-model-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-4"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of a tag as used by the API is "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#tag-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"hooks-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-4"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("tags")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_64a5709a",graph:e.$dataBlock.mermaid_64a5709a}}),a("h2",{attrs:{id:"storage-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-service"}},[e._v("#")]),e._v(" Storage service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global and a contextual service")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("get")]),e._v(", "),a("code",[e._v("create")]),e._v(" and "),a("code",[e._v("remove")]),e._v(" methods are the only one allowed from the client/server side")])]),e._v(" "),a("p",[e._v('Blobs can be created directly using this service or through "attachment" to a target resource (e.g. a user).')]),e._v(" "),a("p",[e._v("This service heavily relies on "),a("a",{attrs:{href:"https://github.com/feathersjs-ecosystem/feathers-blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("feathers-blob"),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://github.com/expressjs/multer",target:"_blank",rel:"noopener noreferrer"}},[e._v("multer"),a("OutboundLink")],1),e._v(" for handling "),a("a",{attrs:{href:"https://docs.feathersjs.com/guides/advanced/file-uploading.html#feathers-blob-with-multipart-support",target:"_blank",rel:"noopener noreferrer"}},[e._v("multipart/form-data"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"data-model-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-5"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("No data model, data are directly stored on target storage backend (i.e. AWS S3).")]),e._v(" "),a("h3",{attrs:{id:"hooks-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-5"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("storage")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_64a56fb2",graph:e.$dataBlock.mermaid_64a56fb2}}),a("h2",{attrs:{id:"organisations-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#organisations-service"}},[e._v("#")]),e._v(" Organisations service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a global service")])]),e._v(" "),a("p",[e._v("This service exhibits the following methods in addition to standard CRUD operations:")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("createOrganisationServices")]),e._v(": creates all registered services for an organisation")]),e._v(" "),a("li",[a("strong",[e._v("removeOrganisationServices")]),e._v(": removes registered services for an organisation")]),e._v(" "),a("li",[a("strong",[e._v("registerOrganisationServicesHook(hook)")]),e._v(": register a function to create additional services per organisation")]),e._v(" "),a("li",[a("strong",[e._v("unregisterOrganisationServicesHook(hook)")]),e._v(": unregister a previously registered function")])]),e._v(" "),a("p",[e._v("A hook function has the following structure:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n  createOrganisationServices: function(organisation, db)\n  removeOrganisationServices: function(organisation, db)\n}\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("By default the following services are created for an organisation: "),a("RouterLink",{attrs:{to:"/api/core/services.html#members-service"}},[e._v("members")]),e._v(", "),a("RouterLink",{attrs:{to:"/api/core/services.html#tags-service"}},[e._v("tags")]),e._v(", "),a("RouterLink",{attrs:{to:"/api/core/services.html#groups-service"}},[e._v("groups")]),e._v(", "),a("RouterLink",{attrs:{to:"/api/core/services.html#storage-service"}},[e._v("storage")]),e._v(".")],1)]),e._v(" "),a("h3",{attrs:{id:"data-model-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-6"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of an organisation as used by the API is "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#organisation-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"hooks-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-6"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("No specific "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("organisations")]),e._v(" service.")],1),e._v(" "),a("h2",{attrs:{id:"members-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#members-service"}},[e._v("#")]),e._v(" Members service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a contextual service")])]),e._v(" "),a("p",[e._v("This service is a proxy to the "),a("RouterLink",{attrs:{to:"/api/core/service.html#users-service"}},[e._v("users service")]),e._v(" available at the organisation level in order to filter users belonging to it.")],1),e._v(" "),a("h3",{attrs:{id:"data-model-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-7"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of a member as used by the API is a the one of a "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#user-data-model"}},[e._v("user")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"hooks-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-7"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("No specific "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("members")]),e._v(" service.")],1),e._v(" "),a("h2",{attrs:{id:"groups-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groups-service"}},[e._v("#")]),e._v(" Groups service")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Available as a contextual service")])]),e._v(" "),a("h3",{attrs:{id:"data-model-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model-8"}},[e._v("#")]),e._v(" Data model")]),e._v(" "),a("p",[e._v("The data model of a group as used by the API is "),a("RouterLink",{attrs:{to:"/architecture/data-model-view.html#group-data-model"}},[e._v("detailed here")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"hooks-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-8"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),a("p",[e._v("The following "),a("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[e._v("hooks")]),e._v(" are executed on the "),a("code",[e._v("groups")]),e._v(" service:")],1),e._v(" "),a("Mermaid",{attrs:{id:"mermaid_64a5685e",graph:e.$dataBlock.mermaid_64a5685e}}),a("h2",{attrs:{id:"local-settings-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-settings-service"}},[e._v("#")]),e._v(" Local settings service")]),e._v(" "),a("p",[e._v("This "),a("strong",[e._v("client-side")]),e._v(" service allows to restore/save persistent settings to/from the "),a("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[e._v("global store")]),e._v(" from/to "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",target:"_blank",rel:"noopener noreferrer"}},[e._v("local storage"),a("OutboundLink")],1),e._v(".")],1),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("get")]),e._v(" and "),a("code",[e._v("patch")]),e._v(" methods are the only one allowed, "),a("code",[e._v("id")]),e._v(" parameter is ignored and methods will always target the whole settings object")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("This service has to be instanciated at application level, none provided by default")])]),e._v(" "),a("p",[e._v("To create your own service use the following code:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" Store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" LocalSettingsService "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'@kalisio/kdk/core.client'")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Setup defaults in global store")]),e._v("\nStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'app-settings'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Create a service targeting only settings in store")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" settingsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("createService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'settings'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  service"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" LocalSettingsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  propertyMapping"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    x"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'app-settings.x'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Restore previous settings from local storage if any")]),e._v("\nsettingsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("restoreSettings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Because settings are available through a service interface you can edit it using the "),a("RouterLink",{attrs:{to:"/api/core/components.html#editors"}},[e._v("editor system")]),e._v(". The "),a("code",[e._v("propertyMapping")]),e._v(" will be used to match form field names and corresponding global store properties.")],1)]),e._v(" "),a("p",[e._v("For instance the following schema can be used to edit the previous sample:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"$schema"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://json-schema.org/draft-06/schema#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"$id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://www.kalisio.xyz/schemas/settings.update.json#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas.UPDATE_SETTINGS_TITLE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"object"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"x"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"string"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"field"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"component"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"form/KTextField"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"helper"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas.X_FIELD_HELPER"')]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"required"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"x"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])])],1)}),[],!1,null,null,null);"function"==typeof o&&o(r);t.default=r.exports}}]);