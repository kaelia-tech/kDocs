(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{174:function(e,t,r){"use strict";r.r(t);var a=r(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),r("p",[e._v("Although the typical architecture presented previously can be deployed in a single-server environment KDK has been developed as a loosely coupled set of modules to prevent it being a "),r("a",{attrs:{href:"http://whatis.techtarget.com/definition/monolithic-architecture",target:"_blank",rel:"noopener noreferrer"}},[e._v("monolithic piece of software"),r("OutboundLink")],1),e._v(". The built-in "),r("a",{attrs:{href:"https://docs.feathersjs.com/guides/about/philosophy.html#services",target:"_blank",rel:"noopener noreferrer"}},[e._v("service layer"),r("OutboundLink")],1),e._v(" helps decoupling the business logic from how it is being accessed based on a "),r("a",{attrs:{href:"https://docs.feathersjs.com/guides/about/philosophy.html#uniform-interfaces",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple and unambiguous interface"),r("OutboundLink")],1),e._v(". Kalisio applications can thus be deployed in a "),r("a",{attrs:{href:"http://searchmicroservices.techtarget.com/definition/microservices",target:"_blank",rel:"noopener noreferrer"}},[e._v("microservice architectural style"),r("OutboundLink")],1),e._v(", which is typically used to provide high availability. The idea is to deploy different application instances on different "),r("em",[e._v("logical hosts")]),e._v(" (can be physical machines as well as containers or virtual machines) each running the same or a different set of services.")]),e._v(" "),r("p",[e._v("However, you will have to face some "),r("a",{attrs:{href:"https://docs.feathersjs.com/guides/advanced/scaling.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("scaling configuration issues"),r("OutboundLink")],1),e._v(" first. You also have to setup the underlying logical infrastructure. It is recommended to have a single source of truth (SSOT) for your data (i.e. a single database), simplifying authentication, which requires you to setup a "),r("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/deploy-replica-set/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB replica set"),r("OutboundLink")],1),e._v(" and configure the DB URL "),r("a",{attrs:{href:"http://mongodb.github.io/node-mongodb-native/2.0/reference/connecting/connection-settings/",target:"_blank",rel:"noopener noreferrer"}},[e._v("accordingly"),r("OutboundLink")],1),e._v(". Then you should make each instance aware of others instances to "),r("a",{attrs:{href:"https://github.com/feathersjs/feathers-sync",target:"_blank",rel:"noopener noreferrer"}},[e._v("synchronize service events"),r("OutboundLink")],1),e._v(". At last, you should deploy a frontend application serving as an "),r("a",{attrs:{href:"http://microservices.io/patterns/apigateway.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("API gateway"),r("OutboundLink")],1),e._v(". To configure the proxy rules, edit the "),r("code",[e._v("proxyTable")]),e._v(" option in your configuration. The frontend server is using "),r("a",{attrs:{href:"https://github.com/chimurai/http-proxy-middleware",target:"_blank",rel:"noopener noreferrer"}},[e._v("http-proxy-middleware"),r("OutboundLink")],1),e._v(" for proxying, so you should refer to its docs for a detailed usage but here's a simple example:")]),e._v(" "),e._m(8),e._m(9),e._v(" "),r("p",[e._v("Our "),r("a",{attrs:{href:"https://github.com/kalisio/feathers-distributed",target:"_blank",rel:"noopener noreferrer"}},[e._v("feathers-distributed"),r("OutboundLink")],1),e._v(" module aims at making distribution more transparent.")])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"architecture-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#architecture-overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Architecture overview")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"global-architecture"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#global-architecture","aria-hidden":"true"}},[this._v("#")]),this._v(" Global architecture")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The typical global architecture and the underlying technologies of "),t("strong",[this._v("KDK")]),this._v(" are summarized in the following diagram.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{href:"../global-architecture.svg"}},[this._v("Global architecture")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"components-and-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#components-and-dependencies","aria-hidden":"true"}},[this._v("#")]),this._v(" Components and dependencies")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The typical components and the underlying dependencies of "),t("strong",[this._v("KDK")]),this._v(" are summarized in the following diagram.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{href:"../component-view.png"}},[this._v("Component view")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"architecture-at-scale"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#architecture-at-scale","aria-hidden":"true"}},[this._v("#")]),this._v(" Architecture at scale")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// config/default.js")]),e._v("\nmodule"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n  proxyTable"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// proxy all requests starting with /api/service")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/api/service'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      target"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://my.service.com'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      changeOrigin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      pathRewrite"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'^/api/service'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/api'")]),e._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The above example will proxy the request "),t("code",[this._v("/api/service/1")]),this._v(" to "),t("code",[this._v("http://my.service.com/api/1")]),this._v(".")])}],!1,null,null,null);n.options.__file="architecture.md";t.default=n.exports}}]);