(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{218:function(t,s,a){t.exports=a.p+"assets/img/users-hooks.506d5935.png"},219:function(t,s,a){t.exports=a.p+"assets/img/authorisations-hooks.223455bf.png"},220:function(t,s,a){t.exports=a.p+"assets/img/tags-hooks.19298e57.png"},221:function(t,s,a){t.exports=a.p+"assets/img/storage-hooks.f7cd9bef.png"},264:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[t._v("#")]),t._v(" Services")]),t._v(" "),e("h2",{attrs:{id:"users-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#users-service"}},[t._v("#")]),t._v(" Users service")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Available as a global service")])]),t._v(" "),e("h3",{attrs:{id:"data-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-model"}},[t._v("#")]),t._v(" Data model")]),t._v(" "),e("p",[t._v("The data model of a user as used by the API is "),e("RouterLink",{attrs:{to:"/architecture/data-model-view.html#user-data-model"}},[t._v("detailed here")]),t._v(".")],1),t._v(" "),e("h3",{attrs:{id:"hooks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),e("p",[t._v("The following "),e("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[t._v("hooks")]),t._v(" are executed on the "),e("code",[t._v("users")]),t._v(" service:\n"),e("img",{attrs:{src:a(218),alt:"Users hooks"}})],1),t._v(" "),e("h2",{attrs:{id:"authorisations-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authorisations-service"}},[t._v("#")]),t._v(" Authorisations service")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Available as a global service")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[e("code",[t._v("create")]),t._v(" and "),e("code",[t._v("remove")]),t._v(" methods are the only one allowed from the client/server side")])]),t._v(" "),e("h3",{attrs:{id:"data-model-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-model-2"}},[t._v("#")]),t._v(" Data model")]),t._v(" "),e("p",[t._v("No data model, authorisations are directly stored on target subject(s).")]),t._v(" "),e("h3",{attrs:{id:"hooks-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks-2"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),e("p",[t._v("The following "),e("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[t._v("hooks")]),t._v(" are executed on the "),e("code",[t._v("authorisations")]),t._v(" service:")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(219),alt:"Authorisations hooks"}})]),t._v(" "),e("h2",{attrs:{id:"tags-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tags-service"}},[t._v("#")]),t._v(" Tags service")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Available as a global and a contextual service")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[e("code",[t._v("update")]),t._v(" method is not available\n"),e("code",[t._v("get")]),t._v(", "),e("code",[t._v("patch")]),t._v(" methods are only allowed from the server side\nclients can only "),e("code",[t._v("create")]),t._v(", "),e("code",[t._v("remove")]),t._v(" and "),e("code",[t._v("find")]),t._v(" tags")])]),t._v(" "),e("h3",{attrs:{id:"data-model-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-model-3"}},[t._v("#")]),t._v(" Data model")]),t._v(" "),e("p",[t._v("The data model of a user as used by the API is "),e("RouterLink",{attrs:{to:"/architecture/data-model-view.html#tag-data-model"}},[t._v("detailed here")]),t._v(".")],1),t._v(" "),e("h3",{attrs:{id:"hooks-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks-3"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),e("p",[t._v("The following "),e("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[t._v("hooks")]),t._v(" are executed on the "),e("code",[t._v("tags")]),t._v(" service:")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(220),alt:"Tags hooks"}})]),t._v(" "),e("h2",{attrs:{id:"storage-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#storage-service"}},[t._v("#")]),t._v(" Storage service")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Available as a global and a contextual service")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[e("code",[t._v("get")]),t._v(", "),e("code",[t._v("create")]),t._v(" and "),e("code",[t._v("remove")]),t._v(" methods are the only one allowed from the client/server side")])]),t._v(" "),e("p",[t._v("This service heavily relies on "),e("a",{attrs:{href:"https://github.com/feathersjs-ecosystem/feathers-blob",target:"_blank",rel:"noopener noreferrer"}},[t._v("feathers-blob"),e("OutboundLink")],1),t._v(" and "),e("a",{attrs:{href:"https://github.com/expressjs/multer",target:"_blank",rel:"noopener noreferrer"}},[t._v("multer"),e("OutboundLink")],1),t._v(" for handling "),e("a",{attrs:{href:"https://docs.feathersjs.com/guides/advanced/file-uploading.html#feathers-blob-with-multipart-support",target:"_blank",rel:"noopener noreferrer"}},[t._v("multipart/form-data"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"data-model-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-model-4"}},[t._v("#")]),t._v(" Data model")]),t._v(" "),e("p",[t._v("No data model, data are directly stored on target storage backend (i.e. AWS S3).")]),t._v(" "),e("h3",{attrs:{id:"hooks-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks-4"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),e("p",[t._v("The following "),e("RouterLink",{attrs:{to:"/api/core/hooks.html"}},[t._v("hooks")]),t._v(" are executed on the "),e("code",[t._v("storage")]),t._v(" service:")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(221),alt:"Storage hooks"}})]),t._v(" "),e("h2",{attrs:{id:"local-settings-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#local-settings-service"}},[t._v("#")]),t._v(" Local settings service")]),t._v(" "),e("p",[t._v("This "),e("strong",[t._v("client-side")]),t._v(" service allows to restore/save persistent settings to/from the "),e("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[t._v("global store")]),t._v(" from/to "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",target:"_blank",rel:"noopener noreferrer"}},[t._v("local storage"),e("OutboundLink")],1),t._v(".")],1),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[e("code",[t._v("get")]),t._v(" and "),e("code",[t._v("patch")]),t._v(" methods are the only one allowed, "),e("code",[t._v("id")]),t._v(" parameter is ignored and methods will always target the whole settings object")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("This service has to be instanciated at application level, none provided by default")])]),t._v(" "),e("p",[t._v("To create your own service use the following code:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LocalSettingsService "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@kalisio/kdk/core.client'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Setup defaults in global store")]),t._v("\nStore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-settings'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" x"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a service targeting only settings in store")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" settingsService "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createService")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'settings'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  service"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LocalSettingsService"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  propertyMapping"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    x"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-settings.x'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Restore previous settings from local storage if any")]),t._v("\nsettingsService"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("restoreSettings")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Because settings are available through a service interface you can edit it using the "),e("RouterLink",{attrs:{to:"/api/core/components.html#editors"}},[t._v("editor system")]),t._v(". The "),e("code",[t._v("propertyMapping")]),t._v(" will be used to match form field names and corresponding global store properties.")],1)]),t._v(" "),e("p",[t._v("For instance the following schema can be used to edit the previous sample:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"$schema"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://json-schema.org/draft-06/schema#"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"$id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.kalisio.xyz/schemas/settings.update.json#"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"schemas.UPDATE_SETTINGS_TITLE"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"object"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"properties"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"field"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"component"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"form/KTextField"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"helper"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"schemas.X_FIELD_HELPER"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);