(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{186:function(e,t,s){"use strict";s.r(t);var r=s(0),o=Object(r.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("h2",{attrs:{id:"query-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Query "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/query.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),s("p",[e._v("Converts from client/server side spatial types (e.g. coordinates or numbers) to basic JS types, which is usually required when querying the database. Applies to "),s("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/query-geospatial/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB geospatial operators"),s("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),s("h2",{attrs:{id:"data-model-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data-model-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Data model "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/model.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),s("p",[e._v("Discard all perspectives declared on the model by default. Will for any to be included when using "),s("a",{attrs:{href:"https://docs.feathersjs.com/api/databases/querying.html#select",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("$select")]),s("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),s("p",[e._v("When a perspectives is present in your data model you must disallow update it in order to avoid erasing it. Indeed, when requesting an object e.g. for edition they are not retrieved by default, su sending it back for update will erase the missing perspective fields.")]),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),s("p",[e._v("Modify the data structure of operation item (i.e. data/result in before/after hook) according to the following options:")]),e._v(" "),e._m(22),e._v(" "),e._m(23),e._m(24),e._v(" "),e._m(25),e._v(" "),s("p",[e._v("Transform any value bound to an "),s("code",[e._v("_id")]),e._v(" like key from a string into a "),s("a",{attrs:{href:"https://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mongo ObjectID"),s("OutboundLink")],1),e._v(" on client queries.")]),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),e._v(" "),s("p",[e._v("Transform a known set of properties from strings into a "),s("a",{attrs:{href:"https://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mongo ObjectIDs"),s("OutboundLink")],1),e._v(" on client queries.")]),e._v(" "),e._m(29),e._v(" "),e._m(30),e._m(31),e._v(" "),e._m(32),e._v(" "),s("p",[e._v("Transform a known set of properties from strings into a Data or "),s("a",{attrs:{href:"https://momentjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("moment"),s("OutboundLink")],1),e._v(" object on client queries.")]),e._v(" "),e._m(33),e._v(" "),e._m(34),e._m(35),e._v(" "),s("p",[e._v("Flag the item as deleted when required by subsequent operations.")]),e._v(" "),e._m(36),e._v(" "),e._m(37),e._v(" "),e._m(38),e._v(" "),s("p",[e._v("Retrieve the target object before an update or a patch operation.")]),e._v(" "),e._m(39),e._v(" "),e._m(40),e._v(" "),e._m(41),e._v(" "),s("p",[e._v("Set the MongoDB "),s("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/expire-data/",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTL"),s("OutboundLink")],1),e._v(" on the target object.")]),e._v(" "),e._m(42),e._v(" "),s("h2",{attrs:{id:"service-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Service "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/service.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(43),e._v(" "),e._m(44),e._v(" "),s("p",[e._v("Rate limit the call of a target service (and possibly operation) according to the following options:")]),e._v(" "),e._m(45),e._v(" "),s("blockquote",[s("p",[e._v("Rely on the "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Token_bucket",target:"_blank",rel:"noopener noreferrer"}},[e._v("token bucket algorithm"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"authorisations-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authorisations-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Authorisations "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/authorisations.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(46),e._v(" "),s("p",[e._v("Retrieve the target subject object(s) for an authorisation operation.")]),e._v(" "),e._m(47),e._v(" "),e._m(48),e._v(" "),e._m(49),e._v(" "),s("p",[e._v("Retrieve the target resource object for an authorisation operation.")]),e._v(" "),e._m(50),e._v(" "),e._m(51),e._v(" "),e._m(52),e._v(" "),e._m(53),e._v(" "),s("p",[e._v("Check permissions to access target resource object(s) for current user on the performed operation.")]),e._v(" "),e._m(54),e._v(" "),e._m(55),e._v(" "),e._m(56),e._v(" "),e._m(57),e._v(" "),e._m(58),e._v(" "),s("p",[e._v("Update cached subject abilities when permissions have changed according to the following options:")]),e._v(" "),e._m(59),e._v(" "),s("h2",{attrs:{id:"users-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#users-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Users "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/users.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(60),e._v(" "),e._m(61),e._v(" "),s("p",[e._v("Check password policy when creating/updating the user's password according to the following options:")]),e._v(" "),e._m(62),e._v(" "),s("blockquote",[s("p",[e._v("For more information read about "),s("a",{attrs:{href:"https://github.com/kalisio/kdk/blob/master/guides/BASICS.MD#configuring",target:"_blank",rel:"noopener noreferrer"}},[e._v("password policy configuration"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),e._m(63),e._v(" "),e._m(64),e._v(" "),s("p",[e._v("Update the password history when updating the user's password according to the following options:")]),e._v(" "),e._m(65),e._v(" "),s("blockquote",[s("p",[e._v("For more information read about "),s("a",{attrs:{href:"https://github.com/kalisio/kdk/blob/master/guides/BASICS.MD#configuring",target:"_blank",rel:"noopener noreferrer"}},[e._v("password policy configuration"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),e._m(66),e._v(" "),e._m(67),e._v(" "),e._m(68),e._v(" "),s("blockquote",[s("p",[e._v("For more information read about "),s("a",{attrs:{href:"https://github.com/kalisio/kdk/blob/master/guides/BASICS.MD#configuring",target:"_blank",rel:"noopener noreferrer"}},[e._v("password policy configuration"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),s("h2",{attrs:{id:"logs-server-source-client-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logs-server-source-client-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Logs "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/logger.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("server source"),s("OutboundLink")],1),e._v(", "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/client/hooks/logger.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("client source"),s("OutboundLink")],1)]),e._v(" "),e._m(69),e._v(" "),e._m(70),e._v(" "),e._m(71),e._v(" "),s("h2",{attrs:{id:"events-source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events-source","aria-hidden":"true"}},[e._v("#")]),e._v(" Events "),s("a",{attrs:{href:"https://github.com/kalisio/kCore/blob/master/src/hooks/events.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("source"),s("OutboundLink")],1)]),e._v(" "),e._m(72),e._v(" "),e._m(73),e._v(" "),e._m(74)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hooks","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"marshallcomparisonquery-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallcomparisonquery-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .marshallComparisonQuery(hook)")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("Converts from client/server side comparison types (e.g. numbers) to basic JS types, which is usually required when querying the database. Applies to "),s("code",[e._v("$lt")]),e._v(", "),s("code",[e._v("$lte")]),e._v(", "),s("code",[e._v("$gt")]),e._v(" and "),s("code",[e._v("$gte")]),e._v(" operators.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Reads the query object to process from "),t("code",[this._v("hook.params.query")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"marshallgeometryquery-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#marshallgeometryquery-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .marshallGeometryQuery(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Reads the query object to process from "),t("code",[this._v("hook.params.query")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"populateobject-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populateobject-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .populateObject(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Return a hook function according to provided options")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Retrieve the target object(s) required by a subsequent operation from its service. The object(s) are populated in "),t("code",[this._v("hook.params")]),this._v(" according to the following options:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("serviceField")]),e._v(": name of the field where to read the name of the target service on "),s("code",[e._v("hook.data")]),e._v(" or "),s("code",[e._v("hook.params.query")])]),e._v(" "),s("li",[s("strong",[e._v("nameServiceAs")]),e._v(": name of the field where to write the target service when found on "),s("code",[e._v("hook.params")])]),e._v(" "),s("li",[s("strong",[e._v("idField")]),e._v(": name of the field where to read the "),s("code",[e._v("_id")]),e._v(" of the target object on "),s("code",[e._v("hook.data")]),e._v(" or "),s("code",[e._v("hook.params.query")])]),e._v(" "),s("li",[s("strong",[e._v("nameIdAs")]),e._v(": name of the field where to write the target object when found on "),s("code",[e._v("hook.params")])]),e._v(" "),s("li",[s("strong",[e._v("throwOnNotFound")]),e._v(": boolean indicating if an error should be raised when either the target service or object is not found")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("If when applied existing object(s) and/or service are found in "),t("code",[this._v("hook.params")]),this._v(" they are reused as is (i.e. not updated)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"populateobjects-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populateobjects-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .populateObjects(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Similar to "),t("a",{attrs:{href:"./HOOKS.MD#populateobjectshook"}},[this._v("populateObject")]),this._v(" except that if no object ID is found it will retrieve all objects from the target servic using "),t("code",[this._v("service.find({ query: {} })")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"processperspectives-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#processperspectives-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .processPerspectives(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Take care of a subset of perspective fields like when using "),t("code",[this._v("$select: ['perspective.fieldName']")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"preventupdateperspectives-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preventupdateperspectives-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .preventUpdatePerspectives(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"serialize-rules-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serialize-rules-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .serialize(rules, options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Return a hook function according to provided options")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("rules")]),this._v(" argument contains the list of transformations to be applied, it is an array of objects like the following:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("source")]),e._v(": the path of the source property to read value from")]),e._v(" "),s("li",[s("strong",[e._v("target")]),e._v(": the path of the target property where to write value to")]),e._v(" "),s("li",[s("strong",[e._v("delete")]),e._v(": boolean indicating if the source property should be deleted after transformation")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("throwOnNotFound")]),this._v(": boolean indicating if an error should be raised when either the target service or object is not found")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" hooks "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'kCore'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Will transform hook data from { name: 'toto' } to { profile: { name: 'toto' } }")]),e._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("hooks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" before"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("serialize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'profile.name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" throwOnNotFound"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"processobjectids-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#processobjectids-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .processObjectIDs(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("blockquote",[s("p",[e._v("Take care of "),s("code",[e._v("$in")]),e._v(", "),s("code",[e._v("$nin")]),e._v(" and "),s("code",[e._v("$or")]),e._v(" operators recursively, as well as nested fields query like "),s("code",[e._v("field._id")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"convertobjectids-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#convertobjectids-properties","aria-hidden":"true"}},[this._v("#")]),this._v(" .convertObjectIDs(properties)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Return a hook function according to provided property list")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Fields are searched on "),t("code",[this._v("hook.data")]),this._v(" or "),t("code",[this._v("hook.params.query")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" hooks "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'kCore'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Will convert data.participant and data.event to ObjectIDs")]),e._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("hooks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" before"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("convertObjectIDs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'participant'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'event'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"convertdates-properties-asmoment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#convertdates-properties-asmoment","aria-hidden":"true"}},[this._v("#")]),this._v(" .convertDates(properties, asMoment)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Return a hook function according to provided property list and Date/moment object flag")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Fields are searched on "),t("code",[this._v("hook.data")]),this._v(" or "),t("code",[this._v("hook.params.query")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" hooks "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'kCore'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Will convert data.expireAt to Date")]),e._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("hooks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" before"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" hooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("convertDates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'expireAt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"setasdeleted-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setasdeleted-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .setAsDeleted(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Delete flag is stored in the "),t("code",[this._v("deleted")]),this._v(" field")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"populatepreviousobject-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populatepreviousobject-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .populatePreviousObject(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Previous object is stored in "),t("code",[this._v("hook.params.previousItem")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"setexpireafter-delayinseconds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setexpireafter-delayinseconds","aria-hidden":"true"}},[this._v("#")]),this._v(" .setExpireAfter(delayInSeconds)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook\nReturn a hook function according to provided delay")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("TTL is stored in the "),t("code",[this._v("expireAt")]),this._v(" field")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"ratelimit-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ratelimit-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .rateLimit(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook\nReturn a hook function according to provided options")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("tokensPerInterval")]),e._v(": the number of allowed tokens in the given delay (1 service call = 1 token)")]),e._v(" "),s("li",[s("strong",[e._v("interval")]),e._v(": the delay to fill the bucket with the given number of tokens in")]),e._v(" "),s("li",[s("strong",[e._v("operation")]),e._v(": will only apply to this operation when given")]),e._v(" "),s("li",[s("strong",[e._v("service")]),e._v(": will only apply to this service when given (usefull when used as a app-level hook)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"populatesubjects-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populatesubjects-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .populateSubjects(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Specialises "),t("a",{attrs:{href:"./HOOKS.MD#populateobjectshook"}},[this._v("populateObjects")]),this._v(" with the following options:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("serviceField")]),e._v(": "),s("code",[e._v("'subjectsService'")])]),e._v(" "),s("li",[s("strong",[e._v("idField")]),e._v(": "),s("code",[e._v("'subjects'")])]),e._v(" "),s("li",[s("strong",[e._v("throwOnNotFound")]),e._v(": "),s("code",[e._v("true")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"populateresource-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populateresource-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .populateResource(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Specialises the "),t("a",{attrs:{href:"./HOOKS.MD#populateobjecthook"}},[this._v("populateObject")]),this._v(" with the following options:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("serviceField")]),e._v(": "),s("code",[e._v("'resourcesService'")])]),e._v(" "),s("li",[s("strong",[e._v("idField")]),e._v(": "),s("code",[e._v("'resource'")])]),e._v(" "),s("li",[s("strong",[e._v("throwOnNotFound")]),e._v(": "),s("code",[e._v("true")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"authorise-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authorise-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .authorise(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If the operation is authorised the "),t("code",[this._v("hook.params.authorised")]),this._v(" flag will be set to "),t("code",[this._v("true")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If you'd like to force/unforce authorisation check use the "),t("code",[this._v("hook.params.checkAuthorisation")]),this._v(" flag.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("By default check will only be performed when called from a client not from the server itself.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"updateabilities-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updateabilities-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .updateAbilities(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Return a hook function according to provided options")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("subjectAsItem")]),this._v(": boolean indicating if the subject is the item of the current operation (e.g. when applied on the users service) or provided by "),t("code",[this._v("hook.params.user")])]),this._v(" "),t("li",[t("strong",[this._v("fetchSubject")]),this._v(": boolean indicating if the subject object has to be entirely fetched from the underlying service (usefull when the item does not include permissions)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"enforcepasswordpolicy-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enforcepasswordpolicy-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .enforcePasswordPolicy(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook\nReturn a hook function according to provided options")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("userAsItem")]),e._v(": boolean indicating if the user is the item of the current operation (e.g. when applied on the users service) or provided by "),s("code",[e._v("hook.params.user")])]),e._v(" "),s("li",[s("strong",[e._v("passwordField")]),e._v(": the name of the field containing the clear password on the item (defaults to "),s("code",[e._v("clearPassword")]),e._v(")")]),e._v(" "),s("li",[s("strong",[e._v("previousPasswordsField")]),e._v(": the name of the field containing the hashed password history on the item (defaults to "),s("code",[e._v("previousPasswords")]),e._v(")")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"storepreviouspassword-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#storepreviouspassword-options","aria-hidden":"true"}},[this._v("#")]),this._v(" .storePreviousPassword(options)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook\nReturn a hook function according to provided options")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("strong",[e._v("userAsItem")]),e._v(": boolean indicating if the user is the item of the current operation (e.g. when applied on the users service) or provided by "),s("code",[e._v("hook.params.user")])]),e._v(" "),s("li",[s("strong",[e._v("passwordField")]),e._v(": the name of the field containing the current hashed password on the item (defaults to "),s("code",[e._v("password")]),e._v(")")]),e._v(" "),s("li",[s("strong",[e._v("previousPasswordsField")]),e._v(": the name of the field containing the hashed password history on the item (defaults to "),s("code",[e._v("previousPasswords")]),e._v(")")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"generatepassword-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generatepassword-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .generatePassword(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("To be used a a before hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Generate a random password according to password policy (if any) and store it in the "),t("strong",[this._v("password")]),this._v(" item field.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"log-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .log(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Log error for each hook in error with error log level.")]),this._v(" "),t("li",[this._v("Log information for each hook ran with verbose (respectively debug for client) log level.")]),this._v(" "),t("li",[this._v("Log detailed information for each hook ran with debug (respectively trace for client) log level.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"emit-hook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#emit-hook","aria-hidden":"true"}},[this._v("#")]),this._v(" .emit(hook)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Usually used as a app-level hook")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Emit an event named "),t("code",[this._v("{hook_type}Hook")]),this._v(" (e.g. "),t("code",[this._v("beforeHook")]),this._v(" or "),t("code",[this._v("afterHook")]),this._v(") for each hook ran, the payload of the event being the hook object.")])}],!1,null,null,null);o.options.__file="hooks.md";t.default=o.exports}}]);